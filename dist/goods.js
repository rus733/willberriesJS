(()=>{"use strict";var __webpack_modules__={220:()=>{eval("\n;// CONCATENATED MODULE: ./src/modules/cart.js\nconst cart = () => {\r\n  const cartBtn = document.querySelector('.button-cart');\r\n  const cart = document.querySelector('#modal-cart');\r\n  const closeBtn = cart.querySelector('.modal-close');\r\n  //контейнер в котором сформированы карточки\r\n  const goodsContainer = document.querySelector('.long-goods-list');\r\n  const cartTable = document.querySelector('.cart-table__goods');\r\n  const modalForm = document.querySelector('.modal-form');\r\n  const cardTableTotal = document.querySelector('.cart-table__total');\r\n  let sum = 0; //обозначим сумму товаров в корзине\r\n\r\n  const getFromStorage = (name) => {\r\n    return localStorage.getItem(name) ? JSON.parse(localStorage.getItem(name)) : [];\r\n  };\r\n\r\n  const updateSum = () => {\r\n    const cart = getFromStorage('cart');\r\n    sum = 0;\r\n    cart.forEach((item) => {\r\n      return (sum += Number(item.price) * Number(item.count));\r\n    });\r\n\r\n    //cardTableTotal.textContent = String(sum);\r\n    cardTableTotal.textContent = `${sum}$`;\r\n  };\r\n\r\n  const deleteCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.filter((good) => {\r\n      return good.id !== id;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const plusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        good.count++;\r\n      }\r\n      return good;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const minusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        if (good.count > 1) {\r\n          good.count--;\r\n        }\r\n      }\r\n      return good;\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const addToCart = (id) => {\r\n    const goods = JSON.parse(localStorage.getItem('goods'));\r\n    //для поиска кликнутого товарар воспользумся методом find\r\n    const clickedGood = goods.find((good) => good.id === id);\r\n    // проверим , есть ли корзина в локал сторедж , если есть считаем ее , если нет образуем ее в виде пустого массива\r\n    //const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) //: [];\r\n    const cart = getFromStorage('cart');\r\n    if (cart.some((good) => good.id === clickedGood.id)) {\r\n      // перебираем все товары и возвращаем их\r\n      cart.map((good) => {\r\n        if (good.id === clickedGood.id) {\r\n          good.count++;\r\n        }\r\n        return good;\r\n      });\r\n    } else {\r\n      clickedGood.count = 1;\r\n      cart.push(clickedGood);\r\n    }\r\n    //запишем изменения в локал сторедж\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  };\r\n\r\n  // рендер\r\n  const renderCartGoods = (goods) => {\r\n    cartTable.innerHTML = '';\r\n    //totalSum = 0;\r\n    //let totalSum = 0; //обозначим сумму товаров в корзине\r\n    //переберем массив goods из корзины(локал сторедж) и сформируем верстку\r\n    goods.forEach((good) => {\r\n      const tr = document.createElement('tr');\r\n      tr.innerHTML = `\r\n      <td>${good.name}</td>\r\n\t\t\t\t\t\t<td>${good.price}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-minus\"\">-</button></td>\r\n\t\t\t\t\t\t<td>${good.count}</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-plus\"\">+</button></td>\r\n\t\t\t\t\t\t<td>${+good.price * +good.count}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-delete\"\">x</button></td>\r\n      `;\r\n      cartTable.append(tr);\r\n\r\n      tr.addEventListener('click', (e) => {\r\n        if (e.target.classList.contains('cart-btn-minus')) {\r\n          minusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-plus')) {\r\n          plusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-delete')) {\r\n          deleteCartItem(good.id);\r\n        }\r\n      });\r\n      //подсчет суммы товаров в корзине\r\n      //return (totalSum = totalSum + Number(good.price) * Number(good.count));\r\n    });\r\n\r\n    // if (cardTableTotal) {\r\n    //   cardTableTotal.textContent = `${totalSum}$`;\r\n    // }\r\n    // return totalSum;\r\n    updateSum();\r\n  };\r\n\r\n  // ф отправки форм\r\n  //отправит на тестовое апи весь обьект карт\r\n  const sendForm = () => {\r\n    const cartArray = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n    const inputName = modalForm.querySelector('[name = \"nameCustomer\"]');\r\n    const inputPhone = modalForm.querySelector('[name = \"phoneCustomer\"]');\r\n    // let inputName = document.getElementsByName('nameCustomer'); //[0] as HTMLInputElement;\r\n    // console.log(' inputName: ', inputName[0].value);\r\n\r\n    // let inputPhone = document.getElementsByName('phoneCustomer'); //[0] as HTMLInputElement);\r\n    // console.log('inputPhone: ', inputPhone[0].value);\r\n\r\n    fetch('https://jsonplaceholder.typicode.com/posts', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        cart: cartArray,\r\n        name: inputName.value,\r\n        phone: inputPhone.value,\r\n        total: sum,\r\n      }),\r\n    }).then(() => {\r\n      setTimeout(() => {\r\n        cart.style.display = '';\r\n        localStorage.removeItem('cart');\r\n      }, 3000);\r\n      inputName.value = '';\r\n      inputPhone.value = '';\r\n      sum = 0;\r\n    });\r\n  };\r\n\r\n  // кнопка отправки формы\r\n  modalForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    sendForm();\r\n  });\r\n\r\n  //при открытии мобильного окна , необходимо вносить с таблицу данные из cart в localStoredg\r\n  cartBtn.addEventListener('click', () => {\r\n    //получим данные из localStorage\r\n    const cartArray = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n\r\n    renderCartGoods(cartArray); //рендер товара в корзинеиз локал сторедж\r\n\r\n    cart.style.display = 'flex';\r\n  });\r\n  //close popup\r\n  closeBtn.addEventListener('click', () => {\r\n    cart.style.display = '';\r\n  });\r\n  //close popup by click to overlay\r\n  cart.addEventListener('click', (e) => {\r\n    //добавили , чтоб не закрывалась корзина && e.target.classList.contains('overlay')\r\n    if (!e.target.closest('.modal') && e.target.classList.contains('overlay')) {\r\n      cart.style.display = '';\r\n    }\r\n  });\r\n\r\n  window.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape') {\r\n      cart.style.display = '';\r\n    }\r\n  });\r\n\r\n  if (goodsContainer) {\r\n    goodsContainer.addEventListener('click', (e) => {\r\n      if (e.target.closest('.add-to-cart')) {\r\n        const buttonToCart = e.target.closest('.add-to-cart');\r\n        const goodId = buttonToCart.dataset.id;\r\n        addToCart(goodId);\r\n      }\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/getGoods.js\nconst getGoods = () => {\r\n  const links = document.querySelectorAll('.navigation-link');\r\n  const more = document.querySelector('.more'); //buton All-view\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    //уберем все карточки из верстки чтобы новые не добавлялись к имеющимся\r\n    goodsContainer.innerHTML = '';\r\n    //переберем все товары из  массива goods и создадим карточки товаров для каждого элемента  good\r\n    goods.forEach((good) => {\r\n      //  создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n      // добавим ему классы из нашей верстки\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      //в контейнер добавим новую карточку - элемент - блок\r\n      goodsContainer.append(goodBlock);\r\n      // и так для каждого элемента полученного в аргумент массива\r\n    });\r\n  };\r\n\r\n  const getData = (value, category) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json') //// /db/db.json\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      //чтобы извлечь данные применим метод json()\r\n      .then((data) => {\r\n        //применим метод фильтр, отфильтруем по категориям товары\r\n        //если категория присутствует в верстке  мы фильтруем  data  , если категории нет (undefined) , мы присваиваем переменной array полный список data\r\n        const array = category ? data.filter((item) => item[category] === value) : data;\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // свойство window.location.href для перехода на другую страницу\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на goods нужно запускать рендер и отпрвлять в рендер тот массив который лежит в localStorage\r\n      });\r\n  };\r\n\r\n  links.forEach((link) => {\r\n    link.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const linkValue = link.textContent;\r\n      //извлечем из верстки значение атрибута data-field равное иди gender или category\r\n      //  при помощи метода dataset\r\n      const category = link.dataset.field;\r\n      getData(linkValue, category);\r\n    });\r\n  });\r\n  // если чтото есть в локолстор  под ключом гуудс  и страница goods.html' то запускаем рендер\r\n  if (localStorage.getItem('goods') && window.location.pathname === '/goods.html') {\r\n    renderGoods(JSON.parse(localStorage.getItem('goods')));\r\n  }\r\n  // added homework connect button wievAll in site imdex.html\r\n  if (more) {\r\n    more.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      getData();\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/search.js\nconst search = () => {\r\n  //\r\n  const input = document.querySelector('.search-block > input');\r\n  const searchBtn = document.querySelector('.search-block > button');\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    goodsContainer.innerHTML = ''; //уберем все карточки из верстки\r\n    //переберем все товары из  массива\r\n    goods.forEach((good) => {\r\n      // теперь создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      goodsContainer.append(goodBlock);\r\n    });\r\n  };\r\n\r\n  const getData = (value) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json')\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      .then((data) => {\r\n        // мы присваиваем переменной array значение data\r\n        const array = data.filter((good) => good.name.toLowerCase().includes(value.toLowerCase()));\r\n        //console.log(value);\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // а   если мы на странице goods то нам нужно получать данные и отрисовывать их\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на гооодс нужно запускать рендер и отпрвлять в рендер тот массив который лежит в локал сторедж\r\n      });\r\n  };\r\n\r\n  //так как при переходе на страницу goods.html на кнопке search отсутствует класс search-block чтобы не было ошибки б которая блокирует скрипт, применим конструкцию try catch\r\n  try {\r\n    searchBtn.addEventListener('click', () => {\r\n      getData(input.value);\r\n    });\r\n  } catch (e) {\r\n    // console.log('верните класс кнопки ', e);\r\n    // console.dir(e);\r\n    console.error(e.message);\r\n    console.error('Уважаемый верстальщик , верните класс пожалуйста');\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/goods.js\n\r\n\r\n\r\n\r\ncart();\r\ngetGoods();\r\nsearch();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDhCQUE4QixJQUFJLFdBQVc7QUFDbEYsK0JBQStCLFNBQVMsZ0JBQWdCLFVBQVU7QUFDbEUsMENBQTBDLFVBQVU7QUFDcEQsK0NBQStDLGlCQUFpQjtBQUNoRSw2RUFBNkUsUUFBUTtBQUNyRixnREFBZ0QsV0FBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvRHNDO0FBQ1E7QUFDSjtBQUMxQztBQUNBLElBQUk7QUFDSixRQUFRO0FBQ1IsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3Byb2plY3Qtd2lsZGJlcnJpcy8uL3NyYy9tb2R1bGVzL2NhcnQuanM/YWMwZSIsIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvbW9kdWxlcy9nZXRHb29kcy5qcz9kNTlhIiwid2VicGFjazovL3Byb2plY3Qtd2lsZGJlcnJpcy8uL3NyYy9tb2R1bGVzL3NlYXJjaC5qcz9lMDc1Iiwid2VicGFjazovL3Byb2plY3Qtd2lsZGJlcnJpcy8uL3NyYy9nb29kcy5qcz83YmRhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjYXJ0ID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWNhcnQnKTtcclxuICBjb25zdCBjYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsLWNhcnQnKTtcclxuICBjb25zdCBjbG9zZUJ0biA9IGNhcnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNsb3NlJyk7XHJcbiAgLy/QutC+0L3RgtC10LnQvdC10YAg0LIg0LrQvtGC0L7RgNC+0Lwg0YHRhNC+0YDQvNC40YDQvtCy0LDQvdGLINC60LDRgNGC0L7Rh9C60LhcclxuICBjb25zdCBnb29kc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb25nLWdvb2RzLWxpc3QnKTtcclxuICBjb25zdCBjYXJ0VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FydC10YWJsZV9fZ29vZHMnKTtcclxuICBjb25zdCBtb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZm9ybScpO1xyXG4gIGNvbnN0IGNhcmRUYWJsZVRvdGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtdGFibGVfX3RvdGFsJyk7XHJcbiAgbGV0IHN1bSA9IDA7IC8v0L7QsdC+0LfQvdCw0YfQuNC8INGB0YPQvNC80YMg0YLQvtCy0LDRgNC+0LIg0LIg0LrQvtGA0LfQuNC90LVcclxuXHJcbiAgY29uc3QgZ2V0RnJvbVN0b3JhZ2UgPSAobmFtZSkgPT4ge1xyXG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKSkgOiBbXTtcclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVTdW0gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gZ2V0RnJvbVN0b3JhZ2UoJ2NhcnQnKTtcclxuICAgIHN1bSA9IDA7XHJcbiAgICBjYXJ0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgcmV0dXJuIChzdW0gKz0gTnVtYmVyKGl0ZW0ucHJpY2UpICogTnVtYmVyKGl0ZW0uY291bnQpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vY2FyZFRhYmxlVG90YWwudGV4dENvbnRlbnQgPSBTdHJpbmcoc3VtKTtcclxuICAgIGNhcmRUYWJsZVRvdGFsLnRleHRDb250ZW50ID0gYCR7c3VtfSRgO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUNhcnRJdGVtID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcclxuICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0LmZpbHRlcigoZ29vZCkgPT4ge1xyXG4gICAgICByZXR1cm4gZ29vZC5pZCAhPT0gaWQ7XHJcbiAgICB9KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpO1xyXG4gICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHBsdXNDYXJ0SXRlbSA9IChpZCkgPT4ge1xyXG4gICAgY29uc3QgY2FydCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XHJcbiAgICBjb25zdCBuZXdDYXJ0ID0gY2FydC5tYXAoKGdvb2QpID0+IHtcclxuICAgICAgaWYgKGdvb2QuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgZ29vZC5jb3VudCsrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBnb29kO1xyXG4gICAgfSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTtcclxuICAgIHJlbmRlckNhcnRHb29kcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBtaW51c0NhcnRJdGVtID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcclxuICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICBpZiAoZ29vZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICBpZiAoZ29vZC5jb3VudCA+IDEpIHtcclxuICAgICAgICAgIGdvb2QuY291bnQtLTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGdvb2Q7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTtcclxuICAgIHJlbmRlckNhcnRHb29kcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBhZGRUb0NhcnQgPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGdvb2RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ29vZHMnKSk7XHJcbiAgICAvL9C00LvRjyDQv9C+0LjRgdC60LAg0LrQu9C40LrQvdGD0YLQvtCz0L4g0YLQvtCy0LDRgNCw0YAg0LLQvtGB0L/QvtC70YzQt9GD0LzRgdGPINC80LXRgtC+0LTQvtC8IGZpbmRcclxuICAgIGNvbnN0IGNsaWNrZWRHb29kID0gZ29vZHMuZmluZCgoZ29vZCkgPT4gZ29vZC5pZCA9PT0gaWQpO1xyXG4gICAgLy8g0L/RgNC+0LLQtdGA0LjQvCAsINC10YHRgtGMINC70Lgg0LrQvtGA0LfQuNC90LAg0LIg0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtiAsINC10YHQu9C4INC10YHRgtGMINGB0YfQuNGC0LDQtdC8INC10LUgLCDQtdGB0LvQuCDQvdC10YIg0L7QsdGA0LDQt9GD0LXQvCDQtdC1INCyINCy0LjQtNC1INC/0YPRgdGC0L7Qs9C+INC80LDRgdGB0LjQstCwXHJcbiAgICAvL2NvbnN0IGNhcnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSAvLzogW107XHJcbiAgICBjb25zdCBjYXJ0ID0gZ2V0RnJvbVN0b3JhZ2UoJ2NhcnQnKTtcclxuICAgIGlmIChjYXJ0LnNvbWUoKGdvb2QpID0+IGdvb2QuaWQgPT09IGNsaWNrZWRHb29kLmlkKSkge1xyXG4gICAgICAvLyDQv9C10YDQtdCx0LjRgNCw0LXQvCDQstGB0LUg0YLQvtCy0LDRgNGLINC4INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC40YVcclxuICAgICAgY2FydC5tYXAoKGdvb2QpID0+IHtcclxuICAgICAgICBpZiAoZ29vZC5pZCA9PT0gY2xpY2tlZEdvb2QuaWQpIHtcclxuICAgICAgICAgIGdvb2QuY291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdvb2Q7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2xpY2tlZEdvb2QuY291bnQgPSAxO1xyXG4gICAgICBjYXJ0LnB1c2goY2xpY2tlZEdvb2QpO1xyXG4gICAgfVxyXG4gICAgLy/Qt9Cw0L/QuNGI0LXQvCDQuNC30LzQtdC90LXQvdC40Y8g0LIg0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtlxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShjYXJ0KSk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0YDQtdC90LTQtdGAXHJcbiAgY29uc3QgcmVuZGVyQ2FydEdvb2RzID0gKGdvb2RzKSA9PiB7XHJcbiAgICBjYXJ0VGFibGUuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvL3RvdGFsU3VtID0gMDtcclxuICAgIC8vbGV0IHRvdGFsU3VtID0gMDsgLy/QvtCx0L7Qt9C90LDRh9C40Lwg0YHRg9C80LzRgyDRgtC+0LLQsNGA0L7QsiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgLy/Qv9C10YDQtdCx0LXRgNC10Lwg0LzQsNGB0YHQuNCyIGdvb2RzINC40Lcg0LrQvtGA0LfQuNC90Yso0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtikg0Lgg0YHRhNC+0YDQvNC40YDRg9C10Lwg0LLQtdGA0YHRgtC60YNcclxuICAgIGdvb2RzLmZvckVhY2goKGdvb2QpID0+IHtcclxuICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDx0ZD4ke2dvb2QubmFtZX08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+JHtnb29kLnByaWNlfSQ8L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLW1pbnVzXCJcIj4tPC9idXR0b24+PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPiR7Z29vZC5jb3VudH08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLXBsdXNcIlwiPis8L2J1dHRvbj48L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+JHsrZ29vZC5wcmljZSAqICtnb29kLmNvdW50fSQ8L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLWRlbGV0ZVwiXCI+eDwvYnV0dG9uPjwvdGQ+XHJcbiAgICAgIGA7XHJcbiAgICAgIGNhcnRUYWJsZS5hcHBlbmQodHIpO1xyXG5cclxuICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcnQtYnRuLW1pbnVzJykpIHtcclxuICAgICAgICAgIG1pbnVzQ2FydEl0ZW0oZ29vZC5pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcnQtYnRuLXBsdXMnKSkge1xyXG4gICAgICAgICAgcGx1c0NhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJ0LWJ0bi1kZWxldGUnKSkge1xyXG4gICAgICAgICAgZGVsZXRlQ2FydEl0ZW0oZ29vZC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy/Qv9C+0LTRgdGH0LXRgiDRgdGD0LzQvNGLINGC0L7QstCw0YDQvtCyINCyINC60L7RgNC30LjQvdC1XHJcbiAgICAgIC8vcmV0dXJuICh0b3RhbFN1bSA9IHRvdGFsU3VtICsgTnVtYmVyKGdvb2QucHJpY2UpICogTnVtYmVyKGdvb2QuY291bnQpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGlmIChjYXJkVGFibGVUb3RhbCkge1xyXG4gICAgLy8gICBjYXJkVGFibGVUb3RhbC50ZXh0Q29udGVudCA9IGAke3RvdGFsU3VtfSRgO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gcmV0dXJuIHRvdGFsU3VtO1xyXG4gICAgdXBkYXRlU3VtKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0YQg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvFxyXG4gIC8v0L7RgtC/0YDQsNCy0LjRgiDQvdCwINGC0LXRgdGC0L7QstC+0LUg0LDQv9C4INCy0LXRgdGMINC+0LHRjNC10LrRgiDQutCw0YDRglxyXG4gIGNvbnN0IHNlbmRGb3JtID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY2FydEFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkgOiBbXTtcclxuICAgIGNvbnN0IGlucHV0TmFtZSA9IG1vZGFsRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZSA9IFwibmFtZUN1c3RvbWVyXCJdJyk7XHJcbiAgICBjb25zdCBpbnB1dFBob25lID0gbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lID0gXCJwaG9uZUN1c3RvbWVyXCJdJyk7XHJcbiAgICAvLyBsZXQgaW5wdXROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ25hbWVDdXN0b21lcicpOyAvL1swXSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgLy8gY29uc29sZS5sb2coJyBpbnB1dE5hbWU6ICcsIGlucHV0TmFtZVswXS52YWx1ZSk7XHJcblxyXG4gICAgLy8gbGV0IGlucHV0UGhvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgncGhvbmVDdXN0b21lcicpOyAvL1swXSBhcyBIVE1MSW5wdXRFbGVtZW50KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdpbnB1dFBob25lOiAnLCBpbnB1dFBob25lWzBdLnZhbHVlKTtcclxuXHJcbiAgICBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGNhcnQ6IGNhcnRBcnJheSxcclxuICAgICAgICBuYW1lOiBpbnB1dE5hbWUudmFsdWUsXHJcbiAgICAgICAgcGhvbmU6IGlucHV0UGhvbmUudmFsdWUsXHJcbiAgICAgICAgdG90YWw6IHN1bSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnQnKTtcclxuICAgICAgfSwgMzAwMCk7XHJcbiAgICAgIGlucHV0TmFtZS52YWx1ZSA9ICcnO1xyXG4gICAgICBpbnB1dFBob25lLnZhbHVlID0gJyc7XHJcbiAgICAgIHN1bSA9IDA7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQutC90L7Qv9C60LAg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLXHJcbiAgbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBzZW5kRm9ybSgpO1xyXG4gIH0pO1xyXG5cclxuICAvL9C/0YDQuCDQvtGC0LrRgNGL0YLQuNC4INC80L7QsdC40LvRjNC90L7Qs9C+INC+0LrQvdCwICwg0L3QtdC+0LHRhdC+0LTQuNC80L4g0LLQvdC+0YHQuNGC0Ywg0YEg0YLQsNCx0LvQuNGG0YMg0LTQsNC90L3Ri9C1INC40LcgY2FydCDQsiBsb2NhbFN0b3JlZGdcclxuICBjYXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy/Qv9C+0LvRg9GH0LjQvCDQtNCw0L3QvdGL0LUg0LjQtyBsb2NhbFN0b3JhZ2VcclxuICAgIGNvbnN0IGNhcnRBcnJheSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpIDogW107XHJcblxyXG4gICAgcmVuZGVyQ2FydEdvb2RzKGNhcnRBcnJheSk7IC8v0YDQtdC90LTQtdGAINGC0L7QstCw0YDQsCDQsiDQutC+0YDQt9C40L3QtdC40Lcg0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtlxyXG5cclxuICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICB9KTtcclxuICAvL2Nsb3NlIHBvcHVwXHJcbiAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjYXJ0LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICB9KTtcclxuICAvL2Nsb3NlIHBvcHVwIGJ5IGNsaWNrIHRvIG92ZXJsYXlcclxuICBjYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIC8v0LTQvtCx0LDQstC40LvQuCAsINGH0YLQvtCxINC90LUg0LfQsNC60YDRi9Cy0LDQu9Cw0YHRjCDQutC+0YDQt9C40L3QsCAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ292ZXJsYXknKVxyXG4gICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCcubW9kYWwnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ292ZXJsYXknKSkge1xyXG4gICAgICBjYXJ0LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICBjYXJ0LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaWYgKGdvb2RzQ29udGFpbmVyKSB7XHJcbiAgICBnb29kc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuYWRkLXRvLWNhcnQnKSkge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvblRvQ2FydCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hZGQtdG8tY2FydCcpO1xyXG4gICAgICAgIGNvbnN0IGdvb2RJZCA9IGJ1dHRvblRvQ2FydC5kYXRhc2V0LmlkO1xyXG4gICAgICAgIGFkZFRvQ2FydChnb29kSWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBnZXRHb29kcyA9ICgpID0+IHtcclxuICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uLWxpbmsnKTtcclxuICBjb25zdCBtb3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vcmUnKTsgLy9idXRvbiBBbGwtdmlld1xyXG5cclxuICBjb25zdCByZW5kZXJHb29kcyA9IChnb29kcykgPT4ge1xyXG4gICAgLy/Qv9C+0LvRg9GH0LjQvCDQutC+0L3RgtC10LnQvdC10YAg0L3QsNGI0LjRhSDQutCw0YDRgtC+0YfQtdC6XHJcbiAgICBjb25zdCBnb29kc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb25nLWdvb2RzLWxpc3QnKTtcclxuICAgIC8v0YPQsdC10YDQtdC8INCy0YHQtSDQutCw0YDRgtC+0YfQutC4INC40Lcg0LLQtdGA0YHRgtC60Lgg0YfRgtC+0LHRiyDQvdC+0LLRi9C1INC90LUg0LTQvtCx0LDQstC70Y/Qu9C40YHRjCDQuiDQuNC80LXRjtGJ0LjQvNGB0Y9cclxuICAgIGdvb2RzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgLy/Qv9C10YDQtdCx0LXRgNC10Lwg0LLRgdC1INGC0L7QstCw0YDRiyDQuNC3ICDQvNCw0YHRgdC40LLQsCBnb29kcyDQuCDRgdC+0LfQtNCw0LTQuNC8INC60LDRgNGC0L7Rh9C60Lgg0YLQvtCy0LDRgNC+0LIg0LTQu9GPINC60LDQttC00L7Qs9C+INGN0LvQtdC80LXQvdGC0LAgIGdvb2RcclxuICAgIGdvb2RzLmZvckVhY2goKGdvb2QpID0+IHtcclxuICAgICAgLy8gINGB0L7Qt9C00LDQtNC40Lwg0Y3Qu9C10LzQtdC90YIgLCDQvdC+0LLRi9C5INCx0LvQvtC6XHJcbiAgICAgIGNvbnN0IGdvb2RCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAvLyDQtNC+0LHQsNCy0LjQvCDQtdC80YMg0LrQu9Cw0YHRgdGLINC40Lcg0L3QsNGI0LXQuSDQstC10YDRgdGC0LrQuFxyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLWxnLTMnKTtcclxuICAgICAgZ29vZEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2NvbC1zbS02Jyk7XHJcbiAgICAgIC8v0YLQtdC/0LXRgNGMINCyINGN0YLQvtGCINCx0LvQvtC6INC30LDQv9C40YjQtdC8INCy0LXRgNGB0YLQutGDINC60LDQttC00L7QuSDQutCw0YDRgtC+0YfQutC4INGC0L7QstCw0YDQsFxyXG4gICAgICAvL9C80YsgINC/0YDQtdC00LLQsNGA0LjRgtC10LvRjNC90L4g0L7Rh9C40YHRgtC40LvQuCDQstC10YDRgdGC0LrRgyBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICBnb29kQmxvY2suaW5uZXJIVE1MID0gYCBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdvb2RzLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgJHtnb29kLmxhYmVsID8gbnVsbCA6ICdkLW5vbmUnfSBcIj4ke2dvb2QubGFiZWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJkYi8ke2dvb2QuaW1nfVwiIGFsdD1cImltYWdlOiAke2dvb2QubmFtZX1cIiBjbGFzcz1cImdvb2RzLWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJnb29kcy10aXRsZVwiPiR7Z29vZC5uYW1lfTwvaDM+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImdvb2RzLWRlc2NyaXB0aW9uXCI+JHtnb29kLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZ29vZHMtY2FyZC1idG4gYWRkLXRvLWNhcnRcIiBkYXRhLWlkPVwiJHtnb29kLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1wcmljZVwiPiQke2dvb2QucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICBcclxuICAgICAgYDtcclxuICAgICAgLy/QsiDQutC+0L3RgtC10LnQvdC10YAg0LTQvtCx0LDQstC40Lwg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDIC0g0Y3Qu9C10LzQtdC90YIgLSDQsdC70L7QulxyXG4gICAgICBnb29kc0NvbnRhaW5lci5hcHBlbmQoZ29vZEJsb2NrKTtcclxuICAgICAgLy8g0Lgg0YLQsNC6INC00LvRjyDQutCw0LbQtNC+0LPQviDRjdC70LXQvNC10L3RgtCwINC/0L7Qu9GD0YfQtdC90L3QvtCz0L4g0LIg0LDRgNCz0YPQvNC10L3RgiDQvNCw0YHRgdC40LLQsFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0RGF0YSA9ICh2YWx1ZSwgY2F0ZWdvcnkpID0+IHtcclxuICAgIC8v0L/QvtC00LrQu9GO0YfQuNC80YHRjyDQuCDQv9C+0LvRg9GH0LjQvCDQtNCw0L3QvdGL0LUg0YEg0YHQtdGA0LLQtdGA0LBcclxuICAgIGZldGNoKCdodHRwczovL3Rlc3Qtd2lsbGJlci1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20vZGIuanNvbicpIC8vLy8gL2RiL2RiLmpzb25cclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpIC8v0L7RgtCy0LXRgiDQsiDQstC40LTQtSDQvtCx0YzQtdC60YLQsCByZXNwb25zZVxyXG4gICAgICAvL9GH0YLQvtCx0Ysg0LjQt9Cy0LvQtdGH0Ywg0LTQsNC90L3Ri9C1INC/0YDQuNC80LXQvdC40Lwg0LzQtdGC0L7QtCBqc29uKClcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAvL9C/0YDQuNC80LXQvdC40Lwg0LzQtdGC0L7QtCDRhNC40LvRjNGC0YAsINC+0YLRhNC40LvRjNGC0YDRg9C10Lwg0L/QviDQutCw0YLQtdCz0L7RgNC40Y/QvCDRgtC+0LLQsNGA0YtcclxuICAgICAgICAvL9C10YHQu9C4INC60LDRgtC10LPQvtGA0LjRjyDQv9GA0LjRgdGD0YLRgdGC0LLRg9C10YIg0LIg0LLQtdGA0YHRgtC60LUgINC80Ysg0YTQuNC70YzRgtGA0YPQtdC8ICBkYXRhICAsINC10YHQu9C4INC60LDRgtC10LPQvtGA0LjQuCDQvdC10YIgKHVuZGVmaW5lZCkgLCDQvNGLINC/0YDQuNGB0LLQsNC40LLQsNC10Lwg0L/QtdGA0LXQvNC10L3QvdC+0LkgYXJyYXkg0L/QvtC70L3Ri9C5INGB0L/QuNGB0L7QuiBkYXRhXHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBjYXRlZ29yeSA/IGRhdGEuZmlsdGVyKChpdGVtKSA9PiBpdGVtW2NhdGVnb3J5XSA9PT0gdmFsdWUpIDogZGF0YTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ29vZHMnLCBKU09OLnN0cmluZ2lmeShhcnJheSkpO1xyXG4gICAgICAgIC8vINGB0LLQvtC50YHRgtCy0L4gd2luZG93LmxvY2F0aW9uLmhyZWYg0LTQu9GPINC/0LXRgNC10YXQvtC00LAg0L3QsCDQtNGA0YPQs9GD0Y4g0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvZ29vZHMuaHRtbCcpIHtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9nb29kcy5odG1sJzsgLy/Qv9C10YDQtdCy0LXQtNC10YIg0L3QsNGBINC90LAg0YHRgtGA0LDQvdC40YbRgyBnb29kcy5odG1sXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlbmRlckdvb2RzKGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0L/RgNC4INC/0LXRgNC10YXQvtC00LUg0L3QsCBnb29kcyDQvdGD0LbQvdC+INC30LDQv9GD0YHQutCw0YLRjCDRgNC10L3QtNC10YAg0Lgg0L7RgtC/0YDQstC70Y/RgtGMINCyINGA0LXQvdC00LXRgCDRgtC+0YIg0LzQsNGB0YHQuNCyINC60L7RgtC+0YDRi9C5INC70LXQttC40YIg0LIgbG9jYWxTdG9yYWdlXHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGxpbmtzLmZvckVhY2goKGxpbmspID0+IHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGxpbmtWYWx1ZSA9IGxpbmsudGV4dENvbnRlbnQ7XHJcbiAgICAgIC8v0LjQt9Cy0LvQtdGH0LXQvCDQuNC3INCy0LXRgNGB0YLQutC4INC30L3QsNGH0LXQvdC40LUg0LDRgtGA0LjQsdGD0YLQsCBkYXRhLWZpZWxkINGA0LDQstC90L7QtSDQuNC00LggZ2VuZGVyINC40LvQuCBjYXRlZ29yeVxyXG4gICAgICAvLyAg0L/RgNC4INC/0L7QvNC+0YnQuCDQvNC10YLQvtC00LAgZGF0YXNldFxyXG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGxpbmsuZGF0YXNldC5maWVsZDtcclxuICAgICAgZ2V0RGF0YShsaW5rVmFsdWUsIGNhdGVnb3J5KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIC8vINC10YHQu9C4INGH0YLQvtGC0L4g0LXRgdGC0Ywg0LIg0LvQvtC60L7Qu9GB0YLQvtGAICDQv9C+0LQg0LrQu9GO0YfQvtC8INCz0YPRg9C00YEgINC4INGB0YLRgNCw0L3QuNGG0LAgZ29vZHMuaHRtbCcg0YLQviDQt9Cw0L/Rg9GB0LrQsNC10Lwg0YDQtdC90LTQtdGAXHJcbiAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpICYmIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9nb29kcy5odG1sJykge1xyXG4gICAgcmVuZGVyR29vZHMoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ29vZHMnKSkpO1xyXG4gIH1cclxuICAvLyBhZGRlZCBob21ld29yayBjb25uZWN0IGJ1dHRvbiB3aWV2QWxsIGluIHNpdGUgaW1kZXguaHRtbFxyXG4gIGlmIChtb3JlKSB7XHJcbiAgICBtb3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBnZXREYXRhKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBzZWFyY2ggPSAoKSA9PiB7XHJcbiAgLy9cclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYmxvY2sgPiBpbnB1dCcpO1xyXG4gIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYmxvY2sgPiBidXR0b24nKTtcclxuXHJcbiAgY29uc3QgcmVuZGVyR29vZHMgPSAoZ29vZHMpID0+IHtcclxuICAgIC8v0L/QvtC70YPRh9C40Lwg0LrQvtC90YLQtdC50L3QtdGAINC90LDRiNC40YUg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgY29uc3QgZ29vZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9uZy1nb29kcy1saXN0Jyk7XHJcbiAgICBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy/Rg9Cx0LXRgNC10Lwg0LLRgdC1INC60LDRgNGC0L7Rh9C60Lgg0LjQtyDQstC10YDRgdGC0LrQuFxyXG4gICAgLy/Qv9C10YDQtdCx0LXRgNC10Lwg0LLRgdC1INGC0L7QstCw0YDRiyDQuNC3ICDQvNCw0YHRgdC40LLQsFxyXG4gICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAvLyDRgtC10L/QtdGA0Ywg0YHQvtC30LTQsNC00LjQvCDRjdC70LXQvNC10L3RgiAsINC90L7QstGL0Lkg0LHQu9C+0LpcclxuICAgICAgY29uc3QgZ29vZEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLWxnLTMnKTtcclxuICAgICAgZ29vZEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2NvbC1zbS02Jyk7XHJcbiAgICAgIC8v0YLQtdC/0LXRgNGMINCyINGN0YLQvtGCINCx0LvQvtC6INC30LDQv9C40YjQtdC8INCy0LXRgNGB0YLQutGDINC60LDQttC00L7QuSDQutCw0YDRgtC+0YfQutC4INGC0L7QstCw0YDQsFxyXG4gICAgICAvL9C80YsgINC/0YDQtdC00LLQsNGA0LjRgtC10LvRjNC90L4g0L7Rh9C40YHRgtC40LvQuCDQstC10YDRgdGC0LrRgyBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICBnb29kQmxvY2suaW5uZXJIVE1MID0gYCBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdvb2RzLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgJHtnb29kLmxhYmVsID8gbnVsbCA6ICdkLW5vbmUnfSBcIj4ke2dvb2QubGFiZWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJkYi8ke2dvb2QuaW1nfVwiIGFsdD1cImltYWdlOiAke2dvb2QubmFtZX1cIiBjbGFzcz1cImdvb2RzLWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJnb29kcy10aXRsZVwiPiR7Z29vZC5uYW1lfTwvaDM+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImdvb2RzLWRlc2NyaXB0aW9uXCI+JHtnb29kLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZ29vZHMtY2FyZC1idG4gYWRkLXRvLWNhcnRcIiBkYXRhLWlkPVwiJHtnb29kLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1wcmljZVwiPiQke2dvb2QucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICBcclxuICAgICAgYDtcclxuICAgICAgZ29vZHNDb250YWluZXIuYXBwZW5kKGdvb2RCbG9jayk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXREYXRhID0gKHZhbHVlKSA9PiB7XHJcbiAgICAvL9C/0L7QtNC60LvRjtGH0LjQvNGB0Y8g0Lgg0L/QvtC70YPRh9C40Lwg0LTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICBmZXRjaCgnaHR0cHM6Ly90ZXN0LXdpbGxiZXItZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tL2RiLmpzb24nKVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkgLy/QvtGC0LLQtdGCINCyINCy0LjQtNC1INC+0LHRjNC10LrRgtCwIHJlc3BvbnNlXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8g0LzRiyDQv9GA0LjRgdCy0LDQuNCy0LDQtdC8INC/0LXRgNC10LzQtdC90L3QvtC5IGFycmF5INC30L3QsNGH0LXQvdC40LUgZGF0YVxyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gZGF0YS5maWx0ZXIoKGdvb2QpID0+IGdvb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ29vZHMnLCBKU09OLnN0cmluZ2lmeShhcnJheSkpO1xyXG4gICAgICAgIC8vINCwICAg0LXRgdC70Lgg0LzRiyDQvdCwINGB0YLRgNCw0L3QuNGG0LUgZ29vZHMg0YLQviDQvdCw0Lwg0L3Rg9C20L3QviDQv9C+0LvRg9GH0LDRgtGMINC00LDQvdC90YvQtSDQuCDQvtGC0YDQuNGB0L7QstGL0LLQsNGC0Ywg0LjRhVxyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvZ29vZHMuaHRtbCcpIHtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9nb29kcy5odG1sJzsgLy/Qv9C10YDQtdCy0LXQtNC10YIg0L3QsNGBINC90LAg0YHRgtGA0LDQvdC40YbRgyBnb29kcy5odG1sXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlbmRlckdvb2RzKGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0L/RgNC4INC/0LXRgNC10YXQvtC00LUg0L3QsCDQs9C+0L7QvtC00YEg0L3Rg9C20L3QviDQt9Cw0L/Rg9GB0LrQsNGC0Ywg0YDQtdC90LTQtdGAINC4INC+0YLQv9GA0LLQu9GP0YLRjCDQsiDRgNC10L3QtNC10YAg0YLQvtGCINC80LDRgdGB0LjQsiDQutC+0YLQvtGA0YvQuSDQu9C10LbQuNGCINCyINC70L7QutCw0Lsg0YHRgtC+0YDQtdC00LZcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/RgtCw0Log0LrQsNC6INC/0YDQuCDQv9C10YDQtdGF0L7QtNC1INC90LAg0YHRgtGA0LDQvdC40YbRgyBnb29kcy5odG1sINC90LAg0LrQvdC+0L/QutC1IHNlYXJjaCDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCINC60LvQsNGB0YEgc2VhcmNoLWJsb2NrINGH0YLQvtCx0Ysg0L3QtSDQsdGL0LvQviDQvtGI0LjQsdC60Lgg0LEg0LrQvtGC0L7RgNCw0Y8g0LHQu9C+0LrQuNGA0YPQtdGCINGB0LrRgNC40L/Rgiwg0L/RgNC40LzQtdC90LjQvCDQutC+0L3RgdGC0YDRg9C60YbQuNGOIHRyeSBjYXRjaFxyXG4gIHRyeSB7XHJcbiAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGdldERhdGEoaW5wdXQudmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ9Cy0LXRgNC90LjRgtC1INC60LvQsNGB0YEg0LrQvdC+0L/QutC4ICcsIGUpO1xyXG4gICAgLy8gY29uc29sZS5kaXIoZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCfQo9Cy0LDQttCw0LXQvNGL0Lkg0LLQtdGA0YHRgtCw0LvRjNGJ0LjQuiAsINCy0LXRgNC90LjRgtC1INC60LvQsNGB0YEg0L/QvtC20LDQu9GD0LnRgdGC0LAnKTtcclxuICB9XHJcbn07XHJcbiIsImltcG9ydCB7IGNhcnQgfSBmcm9tICcuL21vZHVsZXMvY2FydCc7XHJcbmltcG9ydCB7IGdldEdvb2RzIH0gZnJvbSAnLi9tb2R1bGVzL2dldEdvb2RzJztcclxuaW1wb3J0IHsgc2VhcmNoIH0gZnJvbSAnLi9tb2R1bGVzL3NlYXJjaCc7XHJcblxyXG5jYXJ0KCk7XHJcbmdldEdvb2RzKCk7XHJcbnNlYXJjaCgpO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///220\n")}},__webpack_exports__={};__webpack_modules__[220]()})();