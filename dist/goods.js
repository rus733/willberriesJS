(()=>{"use strict";var __webpack_modules__={220:()=>{eval("\n;// CONCATENATED MODULE: ./src/modules/cart.js\nconst cart = () => {\r\n  const cartBtn = document.querySelector('.button-cart');\r\n  const cart = document.querySelector('#modal-cart');\r\n  const closeBtn = cart.querySelector('.modal-close');\r\n  //контейнер в котором сформированы карточки\r\n  const goodsContainer = document.querySelector('.long-goods-list');\r\n  const cartTable = document.querySelector('.cart-table__goods');\r\n  const modalForm = document.querySelector('.modal-form');\r\n  const cardTableTotal = document.querySelector('.cart-table__total');\r\n  let sum = 0; //переменная сумма товаров в корзине\r\n\r\n  const getFromStorage = (name) => {\r\n    return localStorage.getItem(name) ? JSON.parse(localStorage.getItem(name)) : [];\r\n  };\r\n\r\n  const updateSum = () => {\r\n    const cart = getFromStorage('cart');\r\n    sum = 0;\r\n    cart.forEach((item) => {\r\n      return (sum += Number(item.price) * Number(item.count));\r\n    });\r\n    cardTableTotal.textContent = `${sum}$`;\r\n  };\r\n\r\n  const deleteCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.filter((good) => {\r\n      return good.id !== id;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const plusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        good.count++;\r\n      }\r\n      return good;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const minusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        if (good.count > 1) {\r\n          good.count--;\r\n        }\r\n      }\r\n      return good;\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const addToCart = (id) => {\r\n    const goods = JSON.parse(localStorage.getItem('goods'));\r\n    //для поиска кликнутого товарар воспользумся методом find\r\n    const clickedGood = goods.find((good) => good.id === id);\r\n    // проверим , есть ли корзина в локал сторедж , если есть считаем ее , если нет образуем ее в виде пустого массива\r\n    //const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) //: [];\r\n    const cart = getFromStorage('cart');\r\n    if (cart.some((good) => good.id === clickedGood.id)) {\r\n      // перебираем все товары и возвращаем их\r\n      cart.map((good) => {\r\n        if (good.id === clickedGood.id) {\r\n          good.count++;\r\n        }\r\n        return good;\r\n      });\r\n    } else {\r\n      clickedGood.count = 1;\r\n      cart.push(clickedGood);\r\n    }\r\n    //запишем изменения в локал сторедж\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  };\r\n\r\n  // рендер\r\n  const renderCartGoods = (goods) => {\r\n    cartTable.innerHTML = '';\r\n    //переберем массив goods из корзины(локал сторедж) и сформируем верстку\r\n    goods.forEach((good) => {\r\n      const tr = document.createElement('tr');\r\n      tr.innerHTML = `\r\n      <td>${good.name}</td>\r\n\t\t\t\t\t\t<td>${good.price}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-minus\"\">-</button></td>\r\n\t\t\t\t\t\t<td>${good.count}</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-plus\"\">+</button></td>\r\n\t\t\t\t\t\t<td>${+good.price * +good.count}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-delete\"\">x</button></td>\r\n      `;\r\n      cartTable.append(tr);\r\n\r\n      tr.addEventListener('click', (e) => {\r\n        if (e.target.classList.contains('cart-btn-minus')) {\r\n          minusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-plus')) {\r\n          plusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-delete')) {\r\n          deleteCartItem(good.id);\r\n        }\r\n      });\r\n    });\r\n    //подсчет суммы товаров в корзине\r\n    updateSum();\r\n  };\r\n\r\n  // ф отправки форм на тестовое апи весь обьект карт\r\n  const sendForm = () => {\r\n    const cartArray = getFromStorage('cart');\r\n    const inputName = modalForm.querySelector('[name = \"nameCustomer\"]');\r\n    const inputPhone = modalForm.querySelector('[name = \"phoneCustomer\"]');\r\n\r\n    fetch('https://jsonplaceholder.typicode.com/posts', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        cart: cartArray,\r\n        name: inputName.value,\r\n        phone: inputPhone.value,\r\n        total: sum,\r\n      }),\r\n    }).then(() => {\r\n      setTimeout(() => {\r\n        cart.style.display = '';\r\n        localStorage.removeItem('cart');\r\n      }, 3000);\r\n      inputName.value = '';\r\n      inputPhone.value = '';\r\n      sum = 0;\r\n    });\r\n  };\r\n  // кнопка отправки формы\r\n  modalForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    sendForm();\r\n  });\r\n  //при открытии мобильного окна , необходимо вносить с таблицу данные из cart в localStoredg\r\n  cartBtn.addEventListener('click', () => {\r\n    const cartArray = getFromStorage('cart'); //получим данные из localStorage\r\n    renderCartGoods(cartArray); //рендер товара в корзинеиз локал сторедж\r\n    cart.style.display = 'flex';\r\n  });\r\n  //close popup\r\n  closeBtn.addEventListener('click', () => {\r\n    cart.style.display = '';\r\n  });\r\n  //close popup by click to overlay\r\n  cart.addEventListener('click', (e) => {\r\n    //добавили , чтоб не закрывалась корзина && e.target.classList.contains('overlay')\r\n    if (!e.target.closest('.modal') && e.target.classList.contains('overlay')) {\r\n      cart.style.display = '';\r\n    }\r\n  });\r\n\r\n  window.addEventListener('keydown', (e) => {\r\n    if (e.key === 'Escape') {\r\n      cart.style.display = '';\r\n    }\r\n  });\r\n\r\n  if (goodsContainer) {\r\n    goodsContainer.addEventListener('click', (e) => {\r\n      if (e.target.closest('.add-to-cart')) {\r\n        const buttonToCart = e.target.closest('.add-to-cart');\r\n        const goodId = buttonToCart.dataset.id;\r\n        addToCart(goodId);\r\n      }\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/getGoods.js\nconst getGoods = () => {\r\n  const links = document.querySelectorAll('.navigation-link');\r\n  const more = document.querySelector('.more'); //buton All-view\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    //уберем все карточки из верстки чтобы новые не добавлялись к имеющимся\r\n    goodsContainer.innerHTML = '';\r\n    //переберем все товары из  массива goods и создадим карточки товаров для каждого элемента  good\r\n    goods.forEach((good) => {\r\n      //  создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n      // добавим ему классы из нашей верстки\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      //в контейнер добавим новую карточку - элемент - блок\r\n      goodsContainer.append(goodBlock);\r\n      // и так для каждого элемента полученного в аргумент массива\r\n    });\r\n  };\r\n\r\n  const getData = (value, category) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json') //// /db/db.json\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      //чтобы извлечь данные применим метод json()\r\n      .then((data) => {\r\n        //применим метод фильтр, отфильтруем по категориям товары\r\n        //если категория присутствует в верстке  мы фильтруем  data  , если категории нет (undefined) , мы присваиваем переменной array полный список data\r\n        const array = category ? data.filter((item) => item[category] === value) : data;\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // свойство window.location.href для перехода на другую страницу\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на goods нужно запускать рендер и отпрвлять в рендер тот массив который лежит в localStorage\r\n      });\r\n  };\r\n\r\n  links.forEach((link) => {\r\n    link.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const linkValue = link.textContent;\r\n      //извлечем из верстки значение атрибута data-field равное иди gender или category\r\n      //  при помощи метода dataset\r\n      const category = link.dataset.field;\r\n      getData(linkValue, category);\r\n    });\r\n  });\r\n  // если чтото есть в локолстор  под ключом гуудс  и страница goods.html' то запускаем рендер\r\n  if (localStorage.getItem('goods') && window.location.pathname === '/goods.html') {\r\n    renderGoods(JSON.parse(localStorage.getItem('goods')));\r\n  }\r\n  // wievAll added homework connect button  in site imdex.html\r\n  if (more) {\r\n    more.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      getData();\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/search.js\nconst search = () => {\r\n  //\r\n  const input = document.querySelector('.search-block > input');\r\n  const searchBtn = document.querySelector('.search-block > button');\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    goodsContainer.innerHTML = ''; //уберем все карточки из верстки\r\n    //переберем все товары из  массива\r\n    goods.forEach((good) => {\r\n      // теперь создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      goodsContainer.append(goodBlock);\r\n    });\r\n  };\r\n\r\n  const getData = (value) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json')\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      .then((data) => {\r\n        // мы присваиваем переменной array значение data\r\n        const array = data.filter((good) => good.name.toLowerCase().includes(value.toLowerCase()));\r\n        //console.log(value);\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // а   если мы на странице goods то нам нужно получать данные и отрисовывать их\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на гооодс нужно запускать рендер и отпрвлять в рендер тот массив который лежит в локал сторедж\r\n      });\r\n  };\r\n\r\n  //так как при переходе на страницу goods.html на кнопке search отсутствует класс search-block чтобы не было ошибки б которая блокирует скрипт, применим конструкцию try catch\r\n  try {\r\n    searchBtn.addEventListener('click', () => {\r\n      getData(input.value);\r\n    });\r\n  } catch (e) {\r\n    // console.log('верните класс кнопки ', e);\r\n    // console.dir(e);\r\n    console.error(e.message);\r\n    console.error('Уважаемый верстальщик , верните класс пожалуйста');\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/goods.js\n\r\n\r\n\r\n\r\ncart();\r\ngetGoods();\r\nsearch();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLGdCQUFnQixVQUFVO0FBQ2xFLDBDQUEwQyxVQUFVO0FBQ3BELCtDQUErQyxpQkFBaUI7QUFDaEUsNkVBQTZFLFFBQVE7QUFDckYsZ0RBQWdELFdBQVc7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0RzQztBQUNRO0FBQ0o7QUFDMUM7QUFDQSxJQUFJO0FBQ0osUUFBUTtBQUNSLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvbW9kdWxlcy9jYXJ0LmpzP2FjMGUiLCJ3ZWJwYWNrOi8vcHJvamVjdC13aWxkYmVycmlzLy4vc3JjL21vZHVsZXMvZ2V0R29vZHMuanM/ZDU5YSIsIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvbW9kdWxlcy9zZWFyY2guanM/ZTA3NSIsIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvZ29vZHMuanM/N2JkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FydCA9ICgpID0+IHtcclxuICBjb25zdCBjYXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jYXJ0Jyk7XHJcbiAgY29uc3QgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1jYXJ0Jyk7XHJcbiAgY29uc3QgY2xvc2VCdG4gPSBjYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jbG9zZScpO1xyXG4gIC8v0LrQvtC90YLQtdC50L3QtdGAINCyINC60L7RgtC+0YDQvtC8INGB0YTQvtGA0LzQuNGA0L7QstCw0L3RiyDQutCw0YDRgtC+0YfQutC4XHJcbiAgY29uc3QgZ29vZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9uZy1nb29kcy1saXN0Jyk7XHJcbiAgY29uc3QgY2FydFRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtdGFibGVfX2dvb2RzJyk7XHJcbiAgY29uc3QgbW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvcm0nKTtcclxuICBjb25zdCBjYXJkVGFibGVUb3RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LXRhYmxlX190b3RhbCcpO1xyXG4gIGxldCBzdW0gPSAwOyAvL9C/0LXRgNC10LzQtdC90L3QsNGPINGB0YPQvNC80LAg0YLQvtCy0LDRgNC+0LIg0LIg0LrQvtGA0LfQuNC90LVcclxuXHJcbiAgY29uc3QgZ2V0RnJvbVN0b3JhZ2UgPSAobmFtZSkgPT4ge1xyXG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKSkgOiBbXTtcclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVTdW0gPSAoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gZ2V0RnJvbVN0b3JhZ2UoJ2NhcnQnKTtcclxuICAgIHN1bSA9IDA7XHJcbiAgICBjYXJ0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgcmV0dXJuIChzdW0gKz0gTnVtYmVyKGl0ZW0ucHJpY2UpICogTnVtYmVyKGl0ZW0uY291bnQpKTtcclxuICAgIH0pO1xyXG4gICAgY2FyZFRhYmxlVG90YWwudGV4dENvbnRlbnQgPSBgJHtzdW19JGA7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGVsZXRlQ2FydEl0ZW0gPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xyXG4gICAgY29uc3QgbmV3Q2FydCA9IGNhcnQuZmlsdGVyKChnb29kKSA9PiB7XHJcbiAgICAgIHJldHVybiBnb29kLmlkICE9PSBpZDtcclxuICAgIH0pO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShuZXdDYXJ0KSk7XHJcbiAgICByZW5kZXJDYXJ0R29vZHMoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcGx1c0NhcnRJdGVtID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcclxuICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICBpZiAoZ29vZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICBnb29kLmNvdW50Kys7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGdvb2Q7XHJcbiAgICB9KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpO1xyXG4gICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1pbnVzQ2FydEl0ZW0gPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xyXG4gICAgY29uc3QgbmV3Q2FydCA9IGNhcnQubWFwKChnb29kKSA9PiB7XHJcbiAgICAgIGlmIChnb29kLmlkID09PSBpZCkge1xyXG4gICAgICAgIGlmIChnb29kLmNvdW50ID4gMSkge1xyXG4gICAgICAgICAgZ29vZC5jb3VudC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZ29vZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpO1xyXG4gICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFkZFRvQ2FydCA9IChpZCkgPT4ge1xyXG4gICAgY29uc3QgZ29vZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKTtcclxuICAgIC8v0LTQu9GPINC/0L7QuNGB0LrQsCDQutC70LjQutC90YPRgtC+0LPQviDRgtC+0LLQsNGA0LDRgCDQstC+0YHQv9C+0LvRjNC30YPQvNGB0Y8g0LzQtdGC0L7QtNC+0LwgZmluZFxyXG4gICAgY29uc3QgY2xpY2tlZEdvb2QgPSBnb29kcy5maW5kKChnb29kKSA9PiBnb29kLmlkID09PSBpZCk7XHJcbiAgICAvLyDQv9GA0L7QstC10YDQuNC8ICwg0LXRgdGC0Ywg0LvQuCDQutC+0YDQt9C40L3QsCDQsiDQu9C+0LrQsNC7INGB0YLQvtGA0LXQtNC2ICwg0LXRgdC70Lgg0LXRgdGC0Ywg0YHRh9C40YLQsNC10Lwg0LXQtSAsINC10YHQu9C4INC90LXRgiDQvtCx0YDQsNC30YPQtdC8INC10LUg0LIg0LLQuNC00LUg0L/Rg9GB0YLQvtCz0L4g0LzQsNGB0YHQuNCy0LBcclxuICAgIC8vY29uc3QgY2FydCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpIC8vOiBbXTtcclxuICAgIGNvbnN0IGNhcnQgPSBnZXRGcm9tU3RvcmFnZSgnY2FydCcpO1xyXG4gICAgaWYgKGNhcnQuc29tZSgoZ29vZCkgPT4gZ29vZC5pZCA9PT0gY2xpY2tlZEdvb2QuaWQpKSB7XHJcbiAgICAgIC8vINC/0LXRgNC10LHQuNGA0LDQtdC8INCy0YHQtSDRgtC+0LLQsNGA0Ysg0Lgg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LjRhVxyXG4gICAgICBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICAgIGlmIChnb29kLmlkID09PSBjbGlja2VkR29vZC5pZCkge1xyXG4gICAgICAgICAgZ29vZC5jb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ29vZDtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbGlja2VkR29vZC5jb3VudCA9IDE7XHJcbiAgICAgIGNhcnQucHVzaChjbGlja2VkR29vZCk7XHJcbiAgICB9XHJcbiAgICAvL9C30LDQv9C40YjQtdC8INC40LfQvNC10L3QtdC90LjRjyDQsiDQu9C+0LrQsNC7INGB0YLQvtGA0LXQtNC2XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcclxuICB9O1xyXG5cclxuICAvLyDRgNC10L3QtNC10YBcclxuICBjb25zdCByZW5kZXJDYXJ0R29vZHMgPSAoZ29vZHMpID0+IHtcclxuICAgIGNhcnRUYWJsZS5pbm5lckhUTUwgPSAnJztcclxuICAgIC8v0L/QtdGA0LXQsdC10YDQtdC8INC80LDRgdGB0LjQsiBnb29kcyDQuNC3INC60L7RgNC30LjQvdGLKNC70L7QutCw0Lsg0YHRgtC+0YDQtdC00LYpINC4INGB0YTQvtGA0LzQuNGA0YPQtdC8INCy0LXRgNGB0YLQutGDXHJcbiAgICBnb29kcy5mb3JFYWNoKChnb29kKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgICA8dGQ+JHtnb29kLm5hbWV9PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPiR7Z29vZC5wcmljZX0kPC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJjYXJ0LWJ0bi1taW51c1wiXCI+LTwvYnV0dG9uPjwvdGQ+XHJcblx0XHRcdFx0XHRcdDx0ZD4ke2dvb2QuY291bnR9PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJjYXJ0LWJ0bi1wbHVzXCJcIj4rPC9idXR0b24+PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPiR7K2dvb2QucHJpY2UgKiArZ29vZC5jb3VudH0kPC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPjxidXR0b24gY2xhc3M9XCJjYXJ0LWJ0bi1kZWxldGVcIlwiPng8L2J1dHRvbj48L3RkPlxyXG4gICAgICBgO1xyXG4gICAgICBjYXJ0VGFibGUuYXBwZW5kKHRyKTtcclxuXHJcbiAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJ0LWJ0bi1taW51cycpKSB7XHJcbiAgICAgICAgICBtaW51c0NhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJ0LWJ0bi1wbHVzJykpIHtcclxuICAgICAgICAgIHBsdXNDYXJ0SXRlbShnb29kLmlkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FydC1idG4tZGVsZXRlJykpIHtcclxuICAgICAgICAgIGRlbGV0ZUNhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8v0L/QvtC00YHRh9C10YIg0YHRg9C80LzRiyDRgtC+0LLQsNGA0L7QsiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgdXBkYXRlU3VtKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0YQg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvCDQvdCwINGC0LXRgdGC0L7QstC+0LUg0LDQv9C4INCy0LXRgdGMINC+0LHRjNC10LrRgiDQutCw0YDRglxyXG4gIGNvbnN0IHNlbmRGb3JtID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY2FydEFycmF5ID0gZ2V0RnJvbVN0b3JhZ2UoJ2NhcnQnKTtcclxuICAgIGNvbnN0IGlucHV0TmFtZSA9IG1vZGFsRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZSA9IFwibmFtZUN1c3RvbWVyXCJdJyk7XHJcbiAgICBjb25zdCBpbnB1dFBob25lID0gbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lID0gXCJwaG9uZUN1c3RvbWVyXCJdJyk7XHJcblxyXG4gICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBjYXJ0OiBjYXJ0QXJyYXksXHJcbiAgICAgICAgbmFtZTogaW5wdXROYW1lLnZhbHVlLFxyXG4gICAgICAgIHBob25lOiBpbnB1dFBob25lLnZhbHVlLFxyXG4gICAgICAgIHRvdGFsOiBzdW0sXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjYXJ0Jyk7XHJcbiAgICAgIH0sIDMwMDApO1xyXG4gICAgICBpbnB1dE5hbWUudmFsdWUgPSAnJztcclxuICAgICAgaW5wdXRQaG9uZS52YWx1ZSA9ICcnO1xyXG4gICAgICBzdW0gPSAwO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuICAvLyDQutC90L7Qv9C60LAg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLXHJcbiAgbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBzZW5kRm9ybSgpO1xyXG4gIH0pO1xyXG4gIC8v0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0LzQvtCx0LjQu9GM0L3QvtCz0L4g0L7QutC90LAgLCDQvdC10L7QsdGF0L7QtNC40LzQviDQstC90L7RgdC40YLRjCDRgSDRgtCw0LHQu9C40YbRgyDQtNCw0L3QvdGL0LUg0LjQtyBjYXJ0INCyIGxvY2FsU3RvcmVkZ1xyXG4gIGNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0QXJyYXkgPSBnZXRGcm9tU3RvcmFnZSgnY2FydCcpOyAvL9C/0L7Qu9GD0YfQuNC8INC00LDQvdC90YvQtSDQuNC3IGxvY2FsU3RvcmFnZVxyXG4gICAgcmVuZGVyQ2FydEdvb2RzKGNhcnRBcnJheSk7IC8v0YDQtdC90LTQtdGAINGC0L7QstCw0YDQsCDQsiDQutC+0YDQt9C40L3QtdC40Lcg0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtlxyXG4gICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIH0pO1xyXG4gIC8vY2xvc2UgcG9wdXBcclxuICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gIH0pO1xyXG4gIC8vY2xvc2UgcG9wdXAgYnkgY2xpY2sgdG8gb3ZlcmxheVxyXG4gIGNhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgLy/QtNC+0LHQsNCy0LjQu9C4ICwg0YfRgtC+0LEg0L3QtSDQt9Cw0LrRgNGL0LLQsNC70LDRgdGMINC60L7RgNC30LjQvdCwICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmxheScpXHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbCcpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmxheScpKSB7XHJcbiAgICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoZ29vZHNDb250YWluZXIpIHtcclxuICAgIGdvb2RzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5hZGQtdG8tY2FydCcpKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uVG9DYXJ0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmFkZC10by1jYXJ0Jyk7XHJcbiAgICAgICAgY29uc3QgZ29vZElkID0gYnV0dG9uVG9DYXJ0LmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgYWRkVG9DYXJ0KGdvb2RJZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGdldEdvb2RzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tbGluaycpO1xyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9yZScpOyAvL2J1dG9uIEFsbC12aWV3XHJcblxyXG4gIGNvbnN0IHJlbmRlckdvb2RzID0gKGdvb2RzKSA9PiB7XHJcbiAgICAvL9C/0L7Qu9GD0YfQuNC8INC60L7QvdGC0LXQudC90LXRgCDQvdCw0YjQuNGFINC60LDRgNGC0L7Rh9C10LpcclxuICAgIGNvbnN0IGdvb2RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvbmctZ29vZHMtbGlzdCcpO1xyXG4gICAgLy/Rg9Cx0LXRgNC10Lwg0LLRgdC1INC60LDRgNGC0L7Rh9C60Lgg0LjQtyDQstC10YDRgdGC0LrQuCDRh9GC0L7QsdGLINC90L7QstGL0LUg0L3QtSDQtNC+0LHQsNCy0LvRj9C70LjRgdGMINC6INC40LzQtdGO0YnQuNC80YHRj1xyXG4gICAgZ29vZHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvL9C/0LXRgNC10LHQtdGA0LXQvCDQstGB0LUg0YLQvtCy0LDRgNGLINC40LcgINC80LDRgdGB0LjQstCwIGdvb2RzINC4INGB0L7Qt9C00LDQtNC40Lwg0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LLQsNGA0L7QsiDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCAgZ29vZFxyXG4gICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAvLyAg0YHQvtC30LTQsNC00LjQvCDRjdC70LXQvNC10L3RgiAsINC90L7QstGL0Lkg0LHQu9C+0LpcclxuICAgICAgY29uc3QgZ29vZEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIC8vINC00L7QsdCw0LLQuNC8INC10LzRgyDQutC70LDRgdGB0Ysg0LjQtyDQvdCw0YjQtdC5INCy0LXRgNGB0YLQutC4XHJcbiAgICAgIGdvb2RCbG9jay5jbGFzc0xpc3QuYWRkKCdjb2wtbGctMycpO1xyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLXNtLTYnKTtcclxuICAgICAgLy/RgtC10L/QtdGA0Ywg0LIg0Y3RgtC+0YIg0LHQu9C+0Log0LfQsNC/0LjRiNC10Lwg0LLQtdGA0YHRgtC60YMg0LrQsNC20LTQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YLQvtCy0LDRgNCwXHJcbiAgICAgIC8v0LzRiyAg0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3QviDQvtGH0LjRgdGC0LjQu9C4INCy0LXRgNGB0YLQutGDIGdvb2RzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnXHJcbiAgICAgIGdvb2RCbG9jay5pbm5lckhUTUwgPSBgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ29vZHMtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbCAke2dvb2QubGFiZWwgPyBudWxsIDogJ2Qtbm9uZSd9IFwiPiR7Z29vZC5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImRiLyR7Z29vZC5pbWd9XCIgYWx0PVwiaW1hZ2U6ICR7Z29vZC5uYW1lfVwiIGNsYXNzPVwiZ29vZHMtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImdvb2RzLXRpdGxlXCI+JHtnb29kLm5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZ29vZHMtZGVzY3JpcHRpb25cIj4ke2dvb2QuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBnb29kcy1jYXJkLWJ0biBhZGQtdG8tY2FydFwiIGRhdGEtaWQ9XCIke2dvb2QuaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnV0dG9uLXByaWNlXCI+JCR7Z29vZC5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgIFxyXG4gICAgICBgO1xyXG4gICAgICAvL9CyINC60L7QvdGC0LXQudC90LXRgCDQtNC+0LHQsNCy0LjQvCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMgLSDRjdC70LXQvNC10L3RgiAtINCx0LvQvtC6XHJcbiAgICAgIGdvb2RzQ29udGFpbmVyLmFwcGVuZChnb29kQmxvY2spO1xyXG4gICAgICAvLyDQuCDRgtCw0Log0LTQu9GPINC60LDQttC00L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0L/QvtC70YPRh9C10L3QvdC+0LPQviDQsiDQsNGA0LPRg9C80LXQvdGCINC80LDRgdGB0LjQstCwXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXREYXRhID0gKHZhbHVlLCBjYXRlZ29yeSkgPT4ge1xyXG4gICAgLy/Qv9C+0LTQutC70Y7Rh9C40LzRgdGPINC4INC/0L7Qu9GD0YfQuNC8INC00LDQvdC90YvQtSDRgSDRgdC10YDQstC10YDQsFxyXG4gICAgZmV0Y2goJ2h0dHBzOi8vdGVzdC13aWxsYmVyLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9kYi5qc29uJykgLy8vLyAvZGIvZGIuanNvblxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkgLy/QvtGC0LLQtdGCINCyINCy0LjQtNC1INC+0LHRjNC10LrRgtCwIHJlc3BvbnNlXHJcbiAgICAgIC8v0YfRgtC+0LHRiyDQuNC30LLQu9C10YfRjCDQtNCw0L3QvdGL0LUg0L/RgNC40LzQtdC90LjQvCDQvNC10YLQvtC0IGpzb24oKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIC8v0L/RgNC40LzQtdC90LjQvCDQvNC10YLQvtC0INGE0LjQu9GM0YLRgCwg0L7RgtGE0LjQu9GM0YLRgNGD0LXQvCDQv9C+INC60LDRgtC10LPQvtGA0LjRj9C8INGC0L7QstCw0YDRi1xyXG4gICAgICAgIC8v0LXRgdC70Lgg0LrQsNGC0LXQs9C+0YDQuNGPINC/0YDQuNGB0YPRgtGB0YLQstGD0LXRgiDQsiDQstC10YDRgdGC0LrQtSAg0LzRiyDRhNC40LvRjNGC0YDRg9C10LwgIGRhdGEgICwg0LXRgdC70Lgg0LrQsNGC0LXQs9C+0YDQuNC4INC90LXRgiAodW5kZWZpbmVkKSAsINC80Ysg0L/RgNC40YHQstCw0LjQstCw0LXQvCDQv9C10YDQtdC80LXQvdC90L7QuSBhcnJheSDQv9C+0LvQvdGL0Lkg0YHQv9C40YHQvtC6IGRhdGFcclxuICAgICAgICBjb25zdCBhcnJheSA9IGNhdGVnb3J5ID8gZGF0YS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW1bY2F0ZWdvcnldID09PSB2YWx1ZSkgOiBkYXRhO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnb29kcycsIEpTT04uc3RyaW5naWZ5KGFycmF5KSk7XHJcbiAgICAgICAgLy8g0YHQstC+0LnRgdGC0LLQviB3aW5kb3cubG9jYXRpb24uaHJlZiDQtNC70Y8g0L/QtdGA0LXRhdC+0LTQsCDQvdCwINC00YDRg9Cz0YPRjiDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9nb29kcy5odG1sJykge1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2dvb2RzLmh0bWwnOyAvL9C/0LXRgNC10LLQtdC00LXRgiDQvdCw0YEg0L3QsCDRgdGC0YDQsNC90LjRhtGDIGdvb2RzLmh0bWxcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVuZGVyR29vZHMoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQv9GA0Lgg0L/QtdGA0LXRhdC+0LTQtSDQvdCwIGdvb2RzINC90YPQttC90L4g0LfQsNC/0YPRgdC60LDRgtGMINGA0LXQvdC00LXRgCDQuCDQvtGC0L/RgNCy0LvRj9GC0Ywg0LIg0YDQtdC90LTQtdGAINGC0L7RgiDQvNCw0YHRgdC40LIg0LrQvtGC0L7RgNGL0Lkg0LvQtdC20LjRgiDQsiBsb2NhbFN0b3JhZ2VcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgbGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgbGlua1ZhbHVlID0gbGluay50ZXh0Q29udGVudDtcclxuICAgICAgLy/QuNC30LLQu9C10YfQtdC8INC40Lcg0LLQtdGA0YHRgtC60Lgg0LfQvdCw0YfQtdC90LjQtSDQsNGC0YDQuNCx0YPRgtCwIGRhdGEtZmllbGQg0YDQsNCy0L3QvtC1INC40LTQuCBnZW5kZXIg0LjQu9C4IGNhdGVnb3J5XHJcbiAgICAgIC8vICDQv9GA0Lgg0L/QvtC80L7RidC4INC80LXRgtC+0LTQsCBkYXRhc2V0XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gbGluay5kYXRhc2V0LmZpZWxkO1xyXG4gICAgICBnZXREYXRhKGxpbmtWYWx1ZSwgY2F0ZWdvcnkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgLy8g0LXRgdC70Lgg0YfRgtC+0YLQviDQtdGB0YLRjCDQsiDQu9C+0LrQvtC70YHRgtC+0YAgINC/0L7QtCDQutC70Y7Rh9C+0Lwg0LPRg9GD0LTRgSAg0Lgg0YHRgtGA0LDQvdC40YbQsCBnb29kcy5odG1sJyDRgtC+INC30LDQv9GD0YHQutCw0LXQvCDRgNC10L3QtNC10YBcclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dvb2RzJykgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL2dvb2RzLmh0bWwnKSB7XHJcbiAgICByZW5kZXJHb29kcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKSk7XHJcbiAgfVxyXG4gIC8vIHdpZXZBbGwgYWRkZWQgaG9tZXdvcmsgY29ubmVjdCBidXR0b24gIGluIHNpdGUgaW1kZXguaHRtbFxyXG4gIGlmIChtb3JlKSB7XHJcbiAgICBtb3JlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBnZXREYXRhKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBjb25zdCBzZWFyY2ggPSAoKSA9PiB7XHJcbiAgLy9cclxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYmxvY2sgPiBpbnB1dCcpO1xyXG4gIGNvbnN0IHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtYmxvY2sgPiBidXR0b24nKTtcclxuXHJcbiAgY29uc3QgcmVuZGVyR29vZHMgPSAoZ29vZHMpID0+IHtcclxuICAgIC8v0L/QvtC70YPRh9C40Lwg0LrQvtC90YLQtdC50L3QtdGAINC90LDRiNC40YUg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgY29uc3QgZ29vZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9uZy1nb29kcy1saXN0Jyk7XHJcbiAgICBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy/Rg9Cx0LXRgNC10Lwg0LLRgdC1INC60LDRgNGC0L7Rh9C60Lgg0LjQtyDQstC10YDRgdGC0LrQuFxyXG4gICAgLy/Qv9C10YDQtdCx0LXRgNC10Lwg0LLRgdC1INGC0L7QstCw0YDRiyDQuNC3ICDQvNCw0YHRgdC40LLQsFxyXG4gICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAvLyDRgtC10L/QtdGA0Ywg0YHQvtC30LTQsNC00LjQvCDRjdC70LXQvNC10L3RgiAsINC90L7QstGL0Lkg0LHQu9C+0LpcclxuICAgICAgY29uc3QgZ29vZEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLWxnLTMnKTtcclxuICAgICAgZ29vZEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2NvbC1zbS02Jyk7XHJcbiAgICAgIC8v0YLQtdC/0LXRgNGMINCyINGN0YLQvtGCINCx0LvQvtC6INC30LDQv9C40YjQtdC8INCy0LXRgNGB0YLQutGDINC60LDQttC00L7QuSDQutCw0YDRgtC+0YfQutC4INGC0L7QstCw0YDQsFxyXG4gICAgICAvL9C80YsgINC/0YDQtdC00LLQsNGA0LjRgtC10LvRjNC90L4g0L7Rh9C40YHRgtC40LvQuCDQstC10YDRgdGC0LrRgyBnb29kc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xyXG4gICAgICBnb29kQmxvY2suaW5uZXJIVE1MID0gYCBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdvb2RzLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWwgJHtnb29kLmxhYmVsID8gbnVsbCA6ICdkLW5vbmUnfSBcIj4ke2dvb2QubGFiZWx9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJkYi8ke2dvb2QuaW1nfVwiIGFsdD1cImltYWdlOiAke2dvb2QubmFtZX1cIiBjbGFzcz1cImdvb2RzLWltYWdlXCI+XHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJnb29kcy10aXRsZVwiPiR7Z29vZC5uYW1lfTwvaDM+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImdvb2RzLWRlc2NyaXB0aW9uXCI+JHtnb29kLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gZ29vZHMtY2FyZC1idG4gYWRkLXRvLWNhcnRcIiBkYXRhLWlkPVwiJHtnb29kLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJ1dHRvbi1wcmljZVwiPiQke2dvb2QucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PiAgICAgICAgICBcclxuICAgICAgYDtcclxuICAgICAgZ29vZHNDb250YWluZXIuYXBwZW5kKGdvb2RCbG9jayk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXREYXRhID0gKHZhbHVlKSA9PiB7XHJcbiAgICAvL9C/0L7QtNC60LvRjtGH0LjQvNGB0Y8g0Lgg0L/QvtC70YPRh9C40Lwg0LTQsNC90L3Ri9C1INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICBmZXRjaCgnaHR0cHM6Ly90ZXN0LXdpbGxiZXItZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tL2RiLmpzb24nKVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkgLy/QvtGC0LLQtdGCINCyINCy0LjQtNC1INC+0LHRjNC10LrRgtCwIHJlc3BvbnNlXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8g0LzRiyDQv9GA0LjRgdCy0LDQuNCy0LDQtdC8INC/0LXRgNC10LzQtdC90L3QvtC5IGFycmF5INC30L3QsNGH0LXQvdC40LUgZGF0YVxyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gZGF0YS5maWx0ZXIoKGdvb2QpID0+IGdvb2QubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHZhbHVlLnRvTG93ZXJDYXNlKCkpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ29vZHMnLCBKU09OLnN0cmluZ2lmeShhcnJheSkpO1xyXG4gICAgICAgIC8vINCwICAg0LXRgdC70Lgg0LzRiyDQvdCwINGB0YLRgNCw0L3QuNGG0LUgZ29vZHMg0YLQviDQvdCw0Lwg0L3Rg9C20L3QviDQv9C+0LvRg9GH0LDRgtGMINC00LDQvdC90YvQtSDQuCDQvtGC0YDQuNGB0L7QstGL0LLQsNGC0Ywg0LjRhVxyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgIT09ICcvZ29vZHMuaHRtbCcpIHtcclxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9nb29kcy5odG1sJzsgLy/Qv9C10YDQtdCy0LXQtNC10YIg0L3QsNGBINC90LAg0YHRgtGA0LDQvdC40YbRgyBnb29kcy5odG1sXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlbmRlckdvb2RzKGFycmF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g0L/RgNC4INC/0LXRgNC10YXQvtC00LUg0L3QsCDQs9C+0L7QvtC00YEg0L3Rg9C20L3QviDQt9Cw0L/Rg9GB0LrQsNGC0Ywg0YDQtdC90LTQtdGAINC4INC+0YLQv9GA0LLQu9GP0YLRjCDQsiDRgNC10L3QtNC10YAg0YLQvtGCINC80LDRgdGB0LjQsiDQutC+0YLQvtGA0YvQuSDQu9C10LbQuNGCINCyINC70L7QutCw0Lsg0YHRgtC+0YDQtdC00LZcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy/RgtCw0Log0LrQsNC6INC/0YDQuCDQv9C10YDQtdGF0L7QtNC1INC90LAg0YHRgtGA0LDQvdC40YbRgyBnb29kcy5odG1sINC90LAg0LrQvdC+0L/QutC1IHNlYXJjaCDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCINC60LvQsNGB0YEgc2VhcmNoLWJsb2NrINGH0YLQvtCx0Ysg0L3QtSDQsdGL0LvQviDQvtGI0LjQsdC60Lgg0LEg0LrQvtGC0L7RgNCw0Y8g0LHQu9C+0LrQuNGA0YPQtdGCINGB0LrRgNC40L/Rgiwg0L/RgNC40LzQtdC90LjQvCDQutC+0L3RgdGC0YDRg9C60YbQuNGOIHRyeSBjYXRjaFxyXG4gIHRyeSB7XHJcbiAgICBzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGdldERhdGEoaW5wdXQudmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgLy8gY29uc29sZS5sb2coJ9Cy0LXRgNC90LjRgtC1INC60LvQsNGB0YEg0LrQvdC+0L/QutC4ICcsIGUpO1xyXG4gICAgLy8gY29uc29sZS5kaXIoZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XHJcbiAgICBjb25zb2xlLmVycm9yKCfQo9Cy0LDQttCw0LXQvNGL0Lkg0LLQtdGA0YHRgtCw0LvRjNGJ0LjQuiAsINCy0LXRgNC90LjRgtC1INC60LvQsNGB0YEg0L/QvtC20LDQu9GD0LnRgdGC0LAnKTtcclxuICB9XHJcbn07XHJcbiIsImltcG9ydCB7IGNhcnQgfSBmcm9tICcuL21vZHVsZXMvY2FydCc7XHJcbmltcG9ydCB7IGdldEdvb2RzIH0gZnJvbSAnLi9tb2R1bGVzL2dldEdvb2RzJztcclxuaW1wb3J0IHsgc2VhcmNoIH0gZnJvbSAnLi9tb2R1bGVzL3NlYXJjaCc7XHJcblxyXG5jYXJ0KCk7XHJcbmdldEdvb2RzKCk7XHJcbnNlYXJjaCgpO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///220\n")}},__webpack_exports__={};__webpack_modules__[220]()})();