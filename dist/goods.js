(()=>{"use strict";var __webpack_modules__={220:()=>{eval("\n;// CONCATENATED MODULE: ./src/modules/cart.js\nconst cart = () => {\r\n  const cartBtn = document.querySelector('.button-cart');\r\n  const cart = document.querySelector('#modal-cart');\r\n  const closeBtn = cart.querySelector('.modal-close');\r\n  //контейнер в котором сформированы карточки\r\n  const goodsContainer = document.querySelector('.long-goods-list');\r\n  const cartTable = document.querySelector('.cart-table__goods');\r\n  const modalForm = document.querySelector('.modal-form');\r\n  const cardTableTotal = document.querySelector('.cart-table__total');\r\n  let totalSum = 0; //обозначим сумму товаров в корзине\r\n\r\n  const deleteCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.filter((good) => {\r\n      return good.id !== id;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const plusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        good.count++;\r\n      }\r\n      return good;\r\n    });\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const minusCartItem = (id) => {\r\n    const cart = JSON.parse(localStorage.getItem('cart'));\r\n    const newCart = cart.map((good) => {\r\n      if (good.id === id) {\r\n        if (good.count > 0) {\r\n          good.count--;\r\n        }\r\n      }\r\n      return good;\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(newCart));\r\n    renderCartGoods(JSON.parse(localStorage.getItem('cart')));\r\n  };\r\n\r\n  const addToCart = (id) => {\r\n    const goods = JSON.parse(localStorage.getItem('goods'));\r\n    //для поиска кликнутого товарар воспользумся методом find\r\n    const clickedGood = goods.find((good) => good.id === id);\r\n    // проверим , есть ли корзина в локал сторедж , если есть считаем ее , если нет образуем ее в виде пустого массива\r\n    const cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n    if (cart.some((good) => good.id === clickedGood.id)) {\r\n      // перебираем все товары и возвращаем их\r\n      cart.map((good) => {\r\n        if (good.id === clickedGood.id) {\r\n          good.count++;\r\n        }\r\n        return good;\r\n      });\r\n    } else {\r\n      clickedGood.count = 1;\r\n      cart.push(clickedGood);\r\n    }\r\n    //запишем изменения в локал сторедж\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  };\r\n\r\n  // рендер\r\n  const renderCartGoods = (goods) => {\r\n    cartTable.innerHTML = '';\r\n    totalSum = 0;\r\n    //let totalSum = 0; //обозначим сумму товаров в корзине\r\n    //переберем массив goods из корзины(локал сторедж) и сформируем верстку\r\n    goods.forEach((good) => {\r\n      const tr = document.createElement('tr');\r\n      tr.innerHTML = `\r\n      <td>${good.name}</td>\r\n\t\t\t\t\t\t<td>${good.price}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-minus\"\">-</button></td>\r\n\t\t\t\t\t\t<td>${good.count}</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-plus\"\">+</button></td>\r\n\t\t\t\t\t\t<td>${+good.price * +good.count}$</td>\r\n\t\t\t\t\t\t<td><button class=\"cart-btn-delete\"\">x</button></td>\r\n      `;\r\n      cartTable.append(tr);\r\n\r\n      tr.addEventListener('click', (e) => {\r\n        if (e.target.classList.contains('cart-btn-minus')) {\r\n          minusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-plus')) {\r\n          plusCartItem(good.id);\r\n        } else if (e.target.classList.contains('cart-btn-delete')) {\r\n          deleteCartItem(good.id);\r\n        }\r\n      });\r\n      //подсчет суммы товаров в корзине\r\n      return (totalSum = totalSum + +good.price * +good.count);\r\n    });\r\n\r\n    if (cardTableTotal) {\r\n      cardTableTotal.textContent = `${totalSum}$`;\r\n    }\r\n    return totalSum;\r\n  };\r\n\r\n  // ф отправки форм\r\n  //отправит на тестовое апи весь обьект карт\r\n  const sendForm = () => {\r\n    const cartArray = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n    const inputName = modalForm.querySelector('[name = \"nameCustomer\"]');\r\n    const inputPhone = modalForm.querySelector('[name = \"phoneCustomer\"]');\r\n\r\n    fetch('https://jsonplaceholder.typicode.com/posts', {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        cart: cartArray,\r\n        name: inputName.value,\r\n        phone: inputPhone.value,\r\n        total: totalSum,\r\n      }),\r\n    }).then(() => {\r\n      setTimeout(() => {\r\n        cart.style.display = '';\r\n        localStorage.removeItem('cart');\r\n      }, 3000);\r\n      inputName.value = '';\r\n      inputPhone.value = '';\r\n      totalSum = 0;\r\n    });\r\n  };\r\n\r\n  // кнопка отправки формы\r\n  modalForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    sendForm();\r\n  });\r\n\r\n  //при открытии мобильного окна , необходимо вносить с таблицу данные из cart в localStoredg\r\n  cartBtn.addEventListener('click', () => {\r\n    //получим данные из localStorage\r\n    const cartArray = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : [];\r\n\r\n    renderCartGoods(cartArray); //рендер товара в корзинеиз локал сторедж\r\n\r\n    cart.style.display = 'flex';\r\n  });\r\n  //close popup\r\n  closeBtn.addEventListener('click', () => {\r\n    cart.style.display = '';\r\n  });\r\n  //close popup by click to overlay\r\n  cart.addEventListener('click', (e) => {\r\n    //добавили , чтоб не закрывалась корзина && e.target.classList.contains('overlay')\r\n    if (!e.target.closest('.modal') && e.target.classList.contains('overlay')) {\r\n      cart.style.display = '';\r\n    }\r\n  });\r\n\r\n  if (goodsContainer) {\r\n    goodsContainer.addEventListener('click', (e) => {\r\n      if (e.target.closest('.add-to-cart')) {\r\n        const buttonToCart = e.target.closest('.add-to-cart');\r\n        const goodId = buttonToCart.dataset.id;\r\n        addToCart(goodId);\r\n      }\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/getGoods.js\nconst getGoods = () => {\r\n  const links = document.querySelectorAll('.navigation-link');\r\n  const more = document.querySelector('.more'); //buton All-view\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    //уберем все карточки из верстки чтобы новые не добавлялись к имеющимся\r\n    goodsContainer.innerHTML = '';\r\n    //переберем все товары из  массива goods и создадим карточки товаров для каждого элемента  good\r\n    goods.forEach((good) => {\r\n      //  создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n      // добавим ему классы из нашей верстки\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      //в контейнер добавим новую карточку - элемент - блок\r\n      goodsContainer.append(goodBlock);\r\n      // и так для каждого элемента полученного в аргумент массива\r\n    });\r\n  };\r\n\r\n  const getData = (value, category) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json') //// /db/db.json\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      //чтобы извлечь данные применим метод json()\r\n      .then((data) => {\r\n        //применим метод фильтр, отфильтруем по категориям товары\r\n        //если категория присутствует в верстке  мы фильтруем  data  , если категории нет (undefined) , мы присваиваем переменной array полный список data\r\n        const array = category ? data.filter((item) => item[category] === value) : data;\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // свойство window.location.href для перехода на другую страницу\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на goods нужно запускать рендер и отпрвлять в рендер тот массив который лежит в localStorage\r\n      });\r\n  };\r\n\r\n  links.forEach((link) => {\r\n    link.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const linkValue = link.textContent;\r\n      //извлечем из верстки значение атрибута data-field равное иди gender или category\r\n      //  при помощи метода dataset\r\n      const category = link.dataset.field;\r\n      getData(linkValue, category);\r\n    });\r\n  });\r\n  // если чтото есть в локолстор  под ключом гуудс  и страница goods.html' то запускаем рендер\r\n  if (localStorage.getItem('goods') && window.location.pathname === '/goods.html') {\r\n    renderGoods(JSON.parse(localStorage.getItem('goods')));\r\n  }\r\n  // added homework connect button wievAll in site imdex.html\r\n  if (more) {\r\n    more.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      getData();\r\n    });\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/search.js\nconst search = () => {\r\n  //\r\n  const input = document.querySelector('.search-block > input');\r\n  const searchBtn = document.querySelector('.search-block > button');\r\n\r\n  const renderGoods = (goods) => {\r\n    //получим контейнер наших карточек\r\n    const goodsContainer = document.querySelector('.long-goods-list');\r\n    goodsContainer.innerHTML = ''; //уберем все карточки из верстки\r\n    //переберем все товары из  массива\r\n    goods.forEach((good) => {\r\n      // теперь создадим элемент , новый блок\r\n      const goodBlock = document.createElement('div');\r\n\r\n      goodBlock.classList.add('col-lg-3');\r\n      goodBlock.classList.add('col-sm-6');\r\n      //теперь в этот блок запишем верстку каждой карточки товара\r\n      //мы  предварительно очистили верстку goodsContainer.innerHTML = ''\r\n      goodBlock.innerHTML = ` \r\n            <div class=\"goods-card\">\r\n                <span class=\"label ${good.label ? null : 'd-none'} \">${good.label}</span>\r\n                <img src=\"db/${good.img}\" alt=\"image: ${good.name}\" class=\"goods-image\">\r\n                <h3 class=\"goods-title\">${good.name}</h3>\r\n                <p class=\"goods-description\">${good.description}</p>\r\n                <button class=\"button goods-card-btn add-to-cart\" data-id=\"${good.id}\">\r\n                  <span class=\"button-price\">$${good.price}</span>\r\n                </button>\r\n            </div>          \r\n      `;\r\n      goodsContainer.append(goodBlock);\r\n    });\r\n  };\r\n\r\n  const getData = (value) => {\r\n    //подключимся и получим данные с сервера\r\n    fetch('https://test-willber-default-rtdb.firebaseio.com/db.json')\r\n      .then((response) => response.json()) //ответ в виде обьекта response\r\n      .then((data) => {\r\n        // мы присваиваем переменной array значение data\r\n        const array = data.filter((good) => good.name.toLowerCase().includes(value.toLowerCase()));\r\n        //console.log(value);\r\n        localStorage.setItem('goods', JSON.stringify(array));\r\n        // а   если мы на странице goods то нам нужно получать данные и отрисовывать их\r\n        if (window.location.pathname !== '/goods.html') {\r\n          window.location.href = '/goods.html'; //переведет нас на страницу goods.html\r\n        } else {\r\n          renderGoods(array);\r\n        }\r\n        // при переходе на гооодс нужно запускать рендер и отпрвлять в рендер тот массив который лежит в локал сторедж\r\n      });\r\n  };\r\n\r\n  //так как при переходе на страницу goods.html на кнопке search отсутствует класс search-block чтобы не было ошибки б которая блокирует скрипт, применим конструкцию try catch\r\n  try {\r\n    searchBtn.addEventListener('click', () => {\r\n      getData(input.value);\r\n    });\r\n  } catch (e) {\r\n    // console.log('верните класс кнопки ', e);\r\n    // console.dir(e);\r\n    console.error(e.message);\r\n    console.error('Уважаемый верстальщик , верните класс пожалуйста');\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/goods.js\n\r\n\r\n\r\n\r\ncart();\r\ngetGoods();\r\nsearch();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUErQyxpQkFBaUI7QUFDaEUsNkVBQTZFLFFBQVE7QUFDckYsZ0RBQWdELFdBQVc7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0RzQztBQUNRO0FBQ0o7QUFDMUM7QUFDQSxJQUFJO0FBQ0osUUFBUTtBQUNSLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvbW9kdWxlcy9jYXJ0LmpzP2FjMGUiLCJ3ZWJwYWNrOi8vcHJvamVjdC13aWxkYmVycmlzLy4vc3JjL21vZHVsZXMvZ2V0R29vZHMuanM/ZDU5YSIsIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvbW9kdWxlcy9zZWFyY2guanM/ZTA3NSIsIndlYnBhY2s6Ly9wcm9qZWN0LXdpbGRiZXJyaXMvLi9zcmMvZ29vZHMuanM/N2JkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FydCA9ICgpID0+IHtcclxuICBjb25zdCBjYXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jYXJ0Jyk7XHJcbiAgY29uc3QgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1jYXJ0Jyk7XHJcbiAgY29uc3QgY2xvc2VCdG4gPSBjYXJ0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1jbG9zZScpO1xyXG4gIC8v0LrQvtC90YLQtdC50L3QtdGAINCyINC60L7RgtC+0YDQvtC8INGB0YTQvtGA0LzQuNGA0L7QstCw0L3RiyDQutCw0YDRgtC+0YfQutC4XHJcbiAgY29uc3QgZ29vZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9uZy1nb29kcy1saXN0Jyk7XHJcbiAgY29uc3QgY2FydFRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcnQtdGFibGVfX2dvb2RzJyk7XHJcbiAgY29uc3QgbW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWZvcm0nKTtcclxuICBjb25zdCBjYXJkVGFibGVUb3RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJ0LXRhYmxlX190b3RhbCcpO1xyXG4gIGxldCB0b3RhbFN1bSA9IDA7IC8v0L7QsdC+0LfQvdCw0YfQuNC8INGB0YPQvNC80YMg0YLQvtCy0LDRgNC+0LIg0LIg0LrQvtGA0LfQuNC90LVcclxuXHJcbiAgY29uc3QgZGVsZXRlQ2FydEl0ZW0gPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xyXG4gICAgY29uc3QgbmV3Q2FydCA9IGNhcnQuZmlsdGVyKChnb29kKSA9PiB7XHJcbiAgICAgIHJldHVybiBnb29kLmlkICE9PSBpZDtcclxuICAgIH0pO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShuZXdDYXJ0KSk7XHJcbiAgICByZW5kZXJDYXJ0R29vZHMoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcGx1c0NhcnRJdGVtID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcclxuICAgIGNvbnN0IG5ld0NhcnQgPSBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICBpZiAoZ29vZC5pZCA9PT0gaWQpIHtcclxuICAgICAgICBnb29kLmNvdW50Kys7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGdvb2Q7XHJcbiAgICB9KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpO1xyXG4gICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1pbnVzQ2FydEl0ZW0gPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xyXG4gICAgY29uc3QgbmV3Q2FydCA9IGNhcnQubWFwKChnb29kKSA9PiB7XHJcbiAgICAgIGlmIChnb29kLmlkID09PSBpZCkge1xyXG4gICAgICAgIGlmIChnb29kLmNvdW50ID4gMCkge1xyXG4gICAgICAgICAgZ29vZC5jb3VudC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZ29vZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpO1xyXG4gICAgcmVuZGVyQ2FydEdvb2RzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFkZFRvQ2FydCA9IChpZCkgPT4ge1xyXG4gICAgY29uc3QgZ29vZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKTtcclxuICAgIC8v0LTQu9GPINC/0L7QuNGB0LrQsCDQutC70LjQutC90YPRgtC+0LPQviDRgtC+0LLQsNGA0LDRgCDQstC+0YHQv9C+0LvRjNC30YPQvNGB0Y8g0LzQtdGC0L7QtNC+0LwgZmluZFxyXG4gICAgY29uc3QgY2xpY2tlZEdvb2QgPSBnb29kcy5maW5kKChnb29kKSA9PiBnb29kLmlkID09PSBpZCk7XHJcbiAgICAvLyDQv9GA0L7QstC10YDQuNC8ICwg0LXRgdGC0Ywg0LvQuCDQutC+0YDQt9C40L3QsCDQsiDQu9C+0LrQsNC7INGB0YLQvtGA0LXQtNC2ICwg0LXRgdC70Lgg0LXRgdGC0Ywg0YHRh9C40YLQsNC10Lwg0LXQtSAsINC10YHQu9C4INC90LXRgiDQvtCx0YDQsNC30YPQtdC8INC10LUg0LIg0LLQuNC00LUg0L/Rg9GB0YLQvtCz0L4g0LzQsNGB0YHQuNCy0LBcclxuICAgIGNvbnN0IGNhcnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKSA6IFtdO1xyXG4gICAgaWYgKGNhcnQuc29tZSgoZ29vZCkgPT4gZ29vZC5pZCA9PT0gY2xpY2tlZEdvb2QuaWQpKSB7XHJcbiAgICAgIC8vINC/0LXRgNC10LHQuNGA0LDQtdC8INCy0YHQtSDRgtC+0LLQsNGA0Ysg0Lgg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LjRhVxyXG4gICAgICBjYXJ0Lm1hcCgoZ29vZCkgPT4ge1xyXG4gICAgICAgIGlmIChnb29kLmlkID09PSBjbGlja2VkR29vZC5pZCkge1xyXG4gICAgICAgICAgZ29vZC5jb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ29vZDtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbGlja2VkR29vZC5jb3VudCA9IDE7XHJcbiAgICAgIGNhcnQucHVzaChjbGlja2VkR29vZCk7XHJcbiAgICB9XHJcbiAgICAvL9C30LDQv9C40YjQtdC8INC40LfQvNC10L3QtdC90LjRjyDQsiDQu9C+0LrQsNC7INGB0YLQvtGA0LXQtNC2XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGNhcnQpKTtcclxuICB9O1xyXG5cclxuICAvLyDRgNC10L3QtNC10YBcclxuICBjb25zdCByZW5kZXJDYXJ0R29vZHMgPSAoZ29vZHMpID0+IHtcclxuICAgIGNhcnRUYWJsZS5pbm5lckhUTUwgPSAnJztcclxuICAgIHRvdGFsU3VtID0gMDtcclxuICAgIC8vbGV0IHRvdGFsU3VtID0gMDsgLy/QvtCx0L7Qt9C90LDRh9C40Lwg0YHRg9C80LzRgyDRgtC+0LLQsNGA0L7QsiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgLy/Qv9C10YDQtdCx0LXRgNC10Lwg0LzQsNGB0YHQuNCyIGdvb2RzINC40Lcg0LrQvtGA0LfQuNC90Yso0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtikg0Lgg0YHRhNC+0YDQvNC40YDRg9C10Lwg0LLQtdGA0YHRgtC60YNcclxuICAgIGdvb2RzLmZvckVhY2goKGdvb2QpID0+IHtcclxuICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDx0ZD4ke2dvb2QubmFtZX08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+JHtnb29kLnByaWNlfSQ8L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLW1pbnVzXCJcIj4tPC9idXR0b24+PC90ZD5cclxuXHRcdFx0XHRcdFx0PHRkPiR7Z29vZC5jb3VudH08L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLXBsdXNcIlwiPis8L2J1dHRvbj48L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+JHsrZ29vZC5wcmljZSAqICtnb29kLmNvdW50fSQ8L3RkPlxyXG5cdFx0XHRcdFx0XHQ8dGQ+PGJ1dHRvbiBjbGFzcz1cImNhcnQtYnRuLWRlbGV0ZVwiXCI+eDwvYnV0dG9uPjwvdGQ+XHJcbiAgICAgIGA7XHJcbiAgICAgIGNhcnRUYWJsZS5hcHBlbmQodHIpO1xyXG5cclxuICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcnQtYnRuLW1pbnVzJykpIHtcclxuICAgICAgICAgIG1pbnVzQ2FydEl0ZW0oZ29vZC5pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcnQtYnRuLXBsdXMnKSkge1xyXG4gICAgICAgICAgcGx1c0NhcnRJdGVtKGdvb2QuaWQpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJ0LWJ0bi1kZWxldGUnKSkge1xyXG4gICAgICAgICAgZGVsZXRlQ2FydEl0ZW0oZ29vZC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy/Qv9C+0LTRgdGH0LXRgiDRgdGD0LzQvNGLINGC0L7QstCw0YDQvtCyINCyINC60L7RgNC30LjQvdC1XHJcbiAgICAgIHJldHVybiAodG90YWxTdW0gPSB0b3RhbFN1bSArICtnb29kLnByaWNlICogK2dvb2QuY291bnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGNhcmRUYWJsZVRvdGFsKSB7XHJcbiAgICAgIGNhcmRUYWJsZVRvdGFsLnRleHRDb250ZW50ID0gYCR7dG90YWxTdW19JGA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG90YWxTdW07XHJcbiAgfTtcclxuXHJcbiAgLy8g0YQg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvFxyXG4gIC8v0L7RgtC/0YDQsNCy0LjRgiDQvdCwINGC0LXRgdGC0L7QstC+0LUg0LDQv9C4INCy0LXRgdGMINC+0LHRjNC10LrRgiDQutCw0YDRglxyXG4gIGNvbnN0IHNlbmRGb3JtID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY2FydEFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkgOiBbXTtcclxuICAgIGNvbnN0IGlucHV0TmFtZSA9IG1vZGFsRm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZSA9IFwibmFtZUN1c3RvbWVyXCJdJyk7XHJcbiAgICBjb25zdCBpbnB1dFBob25lID0gbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lID0gXCJwaG9uZUN1c3RvbWVyXCJdJyk7XHJcblxyXG4gICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBjYXJ0OiBjYXJ0QXJyYXksXHJcbiAgICAgICAgbmFtZTogaW5wdXROYW1lLnZhbHVlLFxyXG4gICAgICAgIHBob25lOiBpbnB1dFBob25lLnZhbHVlLFxyXG4gICAgICAgIHRvdGFsOiB0b3RhbFN1bSxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NhcnQnKTtcclxuICAgICAgfSwgMzAwMCk7XHJcbiAgICAgIGlucHV0TmFtZS52YWx1ZSA9ICcnO1xyXG4gICAgICBpbnB1dFBob25lLnZhbHVlID0gJyc7XHJcbiAgICAgIHRvdGFsU3VtID0gMDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vINC60L3QvtC/0LrQsCDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80YtcclxuICBtb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNlbmRGb3JtKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8v0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0LzQvtCx0LjQu9GM0L3QvtCz0L4g0L7QutC90LAgLCDQvdC10L7QsdGF0L7QtNC40LzQviDQstC90L7RgdC40YLRjCDRgSDRgtCw0LHQu9C40YbRgyDQtNCw0L3QvdGL0LUg0LjQtyBjYXJ0INCyIGxvY2FsU3RvcmVkZ1xyXG4gIGNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAvL9C/0L7Qu9GD0YfQuNC8INC00LDQvdC90YvQtSDQuNC3IGxvY2FsU3RvcmFnZVxyXG4gICAgY29uc3QgY2FydEFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSkgOiBbXTtcclxuXHJcbiAgICByZW5kZXJDYXJ0R29vZHMoY2FydEFycmF5KTsgLy/RgNC10L3QtNC10YAg0YLQvtCy0LDRgNCwINCyINC60L7RgNC30LjQvdC10LjQtyDQu9C+0LrQsNC7INGB0YLQvtGA0LXQtNC2XHJcblxyXG4gICAgY2FydC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIH0pO1xyXG4gIC8vY2xvc2UgcG9wdXBcclxuICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gIH0pO1xyXG4gIC8vY2xvc2UgcG9wdXAgYnkgY2xpY2sgdG8gb3ZlcmxheVxyXG4gIGNhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgLy/QtNC+0LHQsNCy0LjQu9C4ICwg0YfRgtC+0LEg0L3QtSDQt9Cw0LrRgNGL0LLQsNC70LDRgdGMINC60L7RgNC30LjQvdCwICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmxheScpXHJcbiAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbCcpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmxheScpKSB7XHJcbiAgICAgIGNhcnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoZ29vZHNDb250YWluZXIpIHtcclxuICAgIGdvb2RzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5hZGQtdG8tY2FydCcpKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uVG9DYXJ0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmFkZC10by1jYXJ0Jyk7XHJcbiAgICAgICAgY29uc3QgZ29vZElkID0gYnV0dG9uVG9DYXJ0LmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgYWRkVG9DYXJ0KGdvb2RJZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGdldEdvb2RzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tbGluaycpO1xyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9yZScpOyAvL2J1dG9uIEFsbC12aWV3XHJcblxyXG4gIGNvbnN0IHJlbmRlckdvb2RzID0gKGdvb2RzKSA9PiB7XHJcbiAgICAvL9C/0L7Qu9GD0YfQuNC8INC60L7QvdGC0LXQudC90LXRgCDQvdCw0YjQuNGFINC60LDRgNGC0L7Rh9C10LpcclxuICAgIGNvbnN0IGdvb2RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvbmctZ29vZHMtbGlzdCcpO1xyXG4gICAgLy/Rg9Cx0LXRgNC10Lwg0LLRgdC1INC60LDRgNGC0L7Rh9C60Lgg0LjQtyDQstC10YDRgdGC0LrQuCDRh9GC0L7QsdGLINC90L7QstGL0LUg0L3QtSDQtNC+0LHQsNCy0LvRj9C70LjRgdGMINC6INC40LzQtdGO0YnQuNC80YHRj1xyXG4gICAgZ29vZHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAvL9C/0LXRgNC10LHQtdGA0LXQvCDQstGB0LUg0YLQvtCy0LDRgNGLINC40LcgINC80LDRgdGB0LjQstCwIGdvb2RzINC4INGB0L7Qt9C00LDQtNC40Lwg0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LLQsNGA0L7QsiDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCAgZ29vZFxyXG4gICAgZ29vZHMuZm9yRWFjaCgoZ29vZCkgPT4ge1xyXG4gICAgICAvLyAg0YHQvtC30LTQsNC00LjQvCDRjdC70LXQvNC10L3RgiAsINC90L7QstGL0Lkg0LHQu9C+0LpcclxuICAgICAgY29uc3QgZ29vZEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIC8vINC00L7QsdCw0LLQuNC8INC10LzRgyDQutC70LDRgdGB0Ysg0LjQtyDQvdCw0YjQtdC5INCy0LXRgNGB0YLQutC4XHJcbiAgICAgIGdvb2RCbG9jay5jbGFzc0xpc3QuYWRkKCdjb2wtbGctMycpO1xyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLXNtLTYnKTtcclxuICAgICAgLy/RgtC10L/QtdGA0Ywg0LIg0Y3RgtC+0YIg0LHQu9C+0Log0LfQsNC/0LjRiNC10Lwg0LLQtdGA0YHRgtC60YMg0LrQsNC20LTQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YLQvtCy0LDRgNCwXHJcbiAgICAgIC8v0LzRiyAg0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3QviDQvtGH0LjRgdGC0LjQu9C4INCy0LXRgNGB0YLQutGDIGdvb2RzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnXHJcbiAgICAgIGdvb2RCbG9jay5pbm5lckhUTUwgPSBgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ29vZHMtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbCAke2dvb2QubGFiZWwgPyBudWxsIDogJ2Qtbm9uZSd9IFwiPiR7Z29vZC5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImRiLyR7Z29vZC5pbWd9XCIgYWx0PVwiaW1hZ2U6ICR7Z29vZC5uYW1lfVwiIGNsYXNzPVwiZ29vZHMtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImdvb2RzLXRpdGxlXCI+JHtnb29kLm5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZ29vZHMtZGVzY3JpcHRpb25cIj4ke2dvb2QuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBnb29kcy1jYXJkLWJ0biBhZGQtdG8tY2FydFwiIGRhdGEtaWQ9XCIke2dvb2QuaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnV0dG9uLXByaWNlXCI+JCR7Z29vZC5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgIFxyXG4gICAgICBgO1xyXG4gICAgICAvL9CyINC60L7QvdGC0LXQudC90LXRgCDQtNC+0LHQsNCy0LjQvCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMgLSDRjdC70LXQvNC10L3RgiAtINCx0LvQvtC6XHJcbiAgICAgIGdvb2RzQ29udGFpbmVyLmFwcGVuZChnb29kQmxvY2spO1xyXG4gICAgICAvLyDQuCDRgtCw0Log0LTQu9GPINC60LDQttC00L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0L/QvtC70YPRh9C10L3QvdC+0LPQviDQsiDQsNGA0LPRg9C80LXQvdGCINC80LDRgdGB0LjQstCwXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXREYXRhID0gKHZhbHVlLCBjYXRlZ29yeSkgPT4ge1xyXG4gICAgLy/Qv9C+0LTQutC70Y7Rh9C40LzRgdGPINC4INC/0L7Qu9GD0YfQuNC8INC00LDQvdC90YvQtSDRgSDRgdC10YDQstC10YDQsFxyXG4gICAgZmV0Y2goJ2h0dHBzOi8vdGVzdC13aWxsYmVyLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9kYi5qc29uJykgLy8vLyAvZGIvZGIuanNvblxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkgLy/QvtGC0LLQtdGCINCyINCy0LjQtNC1INC+0LHRjNC10LrRgtCwIHJlc3BvbnNlXHJcbiAgICAgIC8v0YfRgtC+0LHRiyDQuNC30LLQu9C10YfRjCDQtNCw0L3QvdGL0LUg0L/RgNC40LzQtdC90LjQvCDQvNC10YLQvtC0IGpzb24oKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIC8v0L/RgNC40LzQtdC90LjQvCDQvNC10YLQvtC0INGE0LjQu9GM0YLRgCwg0L7RgtGE0LjQu9GM0YLRgNGD0LXQvCDQv9C+INC60LDRgtC10LPQvtGA0LjRj9C8INGC0L7QstCw0YDRi1xyXG4gICAgICAgIC8v0LXRgdC70Lgg0LrQsNGC0LXQs9C+0YDQuNGPINC/0YDQuNGB0YPRgtGB0YLQstGD0LXRgiDQsiDQstC10YDRgdGC0LrQtSAg0LzRiyDRhNC40LvRjNGC0YDRg9C10LwgIGRhdGEgICwg0LXRgdC70Lgg0LrQsNGC0LXQs9C+0YDQuNC4INC90LXRgiAodW5kZWZpbmVkKSAsINC80Ysg0L/RgNC40YHQstCw0LjQstCw0LXQvCDQv9C10YDQtdC80LXQvdC90L7QuSBhcnJheSDQv9C+0LvQvdGL0Lkg0YHQv9C40YHQvtC6IGRhdGFcclxuICAgICAgICBjb25zdCBhcnJheSA9IGNhdGVnb3J5ID8gZGF0YS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW1bY2F0ZWdvcnldID09PSB2YWx1ZSkgOiBkYXRhO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnb29kcycsIEpTT04uc3RyaW5naWZ5KGFycmF5KSk7XHJcbiAgICAgICAgLy8g0YHQstC+0LnRgdGC0LLQviB3aW5kb3cubG9jYXRpb24uaHJlZiDQtNC70Y8g0L/QtdGA0LXRhdC+0LTQsCDQvdCwINC00YDRg9Cz0YPRjiDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9nb29kcy5odG1sJykge1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2dvb2RzLmh0bWwnOyAvL9C/0LXRgNC10LLQtdC00LXRgiDQvdCw0YEg0L3QsCDRgdGC0YDQsNC90LjRhtGDIGdvb2RzLmh0bWxcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVuZGVyR29vZHMoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQv9GA0Lgg0L/QtdGA0LXRhdC+0LTQtSDQvdCwIGdvb2RzINC90YPQttC90L4g0LfQsNC/0YPRgdC60LDRgtGMINGA0LXQvdC00LXRgCDQuCDQvtGC0L/RgNCy0LvRj9GC0Ywg0LIg0YDQtdC90LTQtdGAINGC0L7RgiDQvNCw0YHRgdC40LIg0LrQvtGC0L7RgNGL0Lkg0LvQtdC20LjRgiDQsiBsb2NhbFN0b3JhZ2VcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgbGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgbGlua1ZhbHVlID0gbGluay50ZXh0Q29udGVudDtcclxuICAgICAgLy/QuNC30LLQu9C10YfQtdC8INC40Lcg0LLQtdGA0YHRgtC60Lgg0LfQvdCw0YfQtdC90LjQtSDQsNGC0YDQuNCx0YPRgtCwIGRhdGEtZmllbGQg0YDQsNCy0L3QvtC1INC40LTQuCBnZW5kZXIg0LjQu9C4IGNhdGVnb3J5XHJcbiAgICAgIC8vICDQv9GA0Lgg0L/QvtC80L7RidC4INC80LXRgtC+0LTQsCBkYXRhc2V0XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gbGluay5kYXRhc2V0LmZpZWxkO1xyXG4gICAgICBnZXREYXRhKGxpbmtWYWx1ZSwgY2F0ZWdvcnkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgLy8g0LXRgdC70Lgg0YfRgtC+0YLQviDQtdGB0YLRjCDQsiDQu9C+0LrQvtC70YHRgtC+0YAgINC/0L7QtCDQutC70Y7Rh9C+0Lwg0LPRg9GD0LTRgSAg0Lgg0YHRgtGA0LDQvdC40YbQsCBnb29kcy5odG1sJyDRgtC+INC30LDQv9GD0YHQutCw0LXQvCDRgNC10L3QtNC10YBcclxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dvb2RzJykgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL2dvb2RzLmh0bWwnKSB7XHJcbiAgICByZW5kZXJHb29kcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnb29kcycpKSk7XHJcbiAgfVxyXG4gIC8vIGFkZGVkIGhvbWV3b3JrIGNvbm5lY3QgYnV0dG9uIHdpZXZBbGwgaW4gc2l0ZSBpbWRleC5odG1sXHJcbiAgaWYgKG1vcmUpIHtcclxuICAgIG1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGdldERhdGEoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHNlYXJjaCA9ICgpID0+IHtcclxuICAvL1xyXG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ibG9jayA+IGlucHV0Jyk7XHJcbiAgY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1ibG9jayA+IGJ1dHRvbicpO1xyXG5cclxuICBjb25zdCByZW5kZXJHb29kcyA9IChnb29kcykgPT4ge1xyXG4gICAgLy/Qv9C+0LvRg9GH0LjQvCDQutC+0L3RgtC10LnQvdC10YAg0L3QsNGI0LjRhSDQutCw0YDRgtC+0YfQtdC6XHJcbiAgICBjb25zdCBnb29kc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb25nLWdvb2RzLWxpc3QnKTtcclxuICAgIGdvb2RzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvL9GD0LHQtdGA0LXQvCDQstGB0LUg0LrQsNGA0YLQvtGH0LrQuCDQuNC3INCy0LXRgNGB0YLQutC4XHJcbiAgICAvL9C/0LXRgNC10LHQtdGA0LXQvCDQstGB0LUg0YLQvtCy0LDRgNGLINC40LcgINC80LDRgdGB0LjQstCwXHJcbiAgICBnb29kcy5mb3JFYWNoKChnb29kKSA9PiB7XHJcbiAgICAgIC8vINGC0LXQv9C10YDRjCDRgdC+0LfQtNCw0LTQuNC8INGN0LvQtdC80LXQvdGCICwg0L3QvtCy0YvQuSDQsdC70L7QulxyXG4gICAgICBjb25zdCBnb29kQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgIGdvb2RCbG9jay5jbGFzc0xpc3QuYWRkKCdjb2wtbGctMycpO1xyXG4gICAgICBnb29kQmxvY2suY2xhc3NMaXN0LmFkZCgnY29sLXNtLTYnKTtcclxuICAgICAgLy/RgtC10L/QtdGA0Ywg0LIg0Y3RgtC+0YIg0LHQu9C+0Log0LfQsNC/0LjRiNC10Lwg0LLQtdGA0YHRgtC60YMg0LrQsNC20LTQvtC5INC60LDRgNGC0L7Rh9C60Lgg0YLQvtCy0LDRgNCwXHJcbiAgICAgIC8v0LzRiyAg0L/RgNC10LTQstCw0YDQuNGC0LXQu9GM0L3QviDQvtGH0LjRgdGC0LjQu9C4INCy0LXRgNGB0YLQutGDIGdvb2RzQ29udGFpbmVyLmlubmVySFRNTCA9ICcnXHJcbiAgICAgIGdvb2RCbG9jay5pbm5lckhUTUwgPSBgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ29vZHMtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbCAke2dvb2QubGFiZWwgPyBudWxsIDogJ2Qtbm9uZSd9IFwiPiR7Z29vZC5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImRiLyR7Z29vZC5pbWd9XCIgYWx0PVwiaW1hZ2U6ICR7Z29vZC5uYW1lfVwiIGNsYXNzPVwiZ29vZHMtaW1hZ2VcIj5cclxuICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cImdvb2RzLXRpdGxlXCI+JHtnb29kLm5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiZ29vZHMtZGVzY3JpcHRpb25cIj4ke2dvb2QuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBnb29kcy1jYXJkLWJ0biBhZGQtdG8tY2FydFwiIGRhdGEtaWQ9XCIke2dvb2QuaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYnV0dG9uLXByaWNlXCI+JCR7Z29vZC5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+ICAgICAgICAgIFxyXG4gICAgICBgO1xyXG4gICAgICBnb29kc0NvbnRhaW5lci5hcHBlbmQoZ29vZEJsb2NrKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldERhdGEgPSAodmFsdWUpID0+IHtcclxuICAgIC8v0L/QvtC00LrQu9GO0YfQuNC80YHRjyDQuCDQv9C+0LvRg9GH0LjQvCDQtNCw0L3QvdGL0LUg0YEg0YHQtdGA0LLQtdGA0LBcclxuICAgIGZldGNoKCdodHRwczovL3Rlc3Qtd2lsbGJlci1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20vZGIuanNvbicpXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKSAvL9C+0YLQstC10YIg0LIg0LLQuNC00LUg0L7QsdGM0LXQutGC0LAgcmVzcG9uc2VcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAvLyDQvNGLINC/0YDQuNGB0LLQsNC40LLQsNC10Lwg0L/QtdGA0LXQvNC10L3QvdC+0LkgYXJyYXkg0LfQvdCw0YfQtdC90LjQtSBkYXRhXHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBkYXRhLmZpbHRlcigoZ29vZCkgPT4gZ29vZC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModmFsdWUudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnb29kcycsIEpTT04uc3RyaW5naWZ5KGFycmF5KSk7XHJcbiAgICAgICAgLy8g0LAgICDQtdGB0LvQuCDQvNGLINC90LAg0YHRgtGA0LDQvdC40YbQtSBnb29kcyDRgtC+INC90LDQvCDQvdGD0LbQvdC+INC/0L7Qu9GD0YfQsNGC0Ywg0LTQsNC90L3Ri9C1INC4INC+0YLRgNC40YHQvtCy0YvQstCw0YLRjCDQuNGFXHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy9nb29kcy5odG1sJykge1xyXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2dvb2RzLmh0bWwnOyAvL9C/0LXRgNC10LLQtdC00LXRgiDQvdCw0YEg0L3QsCDRgdGC0YDQsNC90LjRhtGDIGdvb2RzLmh0bWxcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVuZGVyR29vZHMoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQv9GA0Lgg0L/QtdGA0LXRhdC+0LTQtSDQvdCwINCz0L7QvtC+0LTRgSDQvdGD0LbQvdC+INC30LDQv9GD0YHQutCw0YLRjCDRgNC10L3QtNC10YAg0Lgg0L7RgtC/0YDQstC70Y/RgtGMINCyINGA0LXQvdC00LXRgCDRgtC+0YIg0LzQsNGB0YHQuNCyINC60L7RgtC+0YDRi9C5INC70LXQttC40YIg0LIg0LvQvtC60LDQuyDRgdGC0L7RgNC10LTQtlxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAvL9GC0LDQuiDQutCw0Log0L/RgNC4INC/0LXRgNC10YXQvtC00LUg0L3QsCDRgdGC0YDQsNC90LjRhtGDIGdvb2RzLmh0bWwg0L3QsCDQutC90L7Qv9C60LUgc2VhcmNoINC+0YLRgdGD0YLRgdGC0LLRg9C10YIg0LrQu9Cw0YHRgSBzZWFyY2gtYmxvY2sg0YfRgtC+0LHRiyDQvdC1INCx0YvQu9C+INC+0YjQuNCx0LrQuCDQsSDQutC+0YLQvtGA0LDRjyDQsdC70L7QutC40YDRg9C10YIg0YHQutGA0LjQv9GCLCDQv9GA0LjQvNC10L3QuNC8INC60L7QvdGB0YLRgNGD0LrRhtC40Y4gdHJ5IGNhdGNoXHJcbiAgdHJ5IHtcclxuICAgIHNlYXJjaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgZ2V0RGF0YShpbnB1dC52YWx1ZSk7XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygn0LLQtdGA0L3QuNGC0LUg0LrQu9Cw0YHRgSDQutC90L7Qv9C60LggJywgZSk7XHJcbiAgICAvLyBjb25zb2xlLmRpcihlKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ9Cj0LLQsNC20LDQtdC80YvQuSDQstC10YDRgdGC0LDQu9GM0YnQuNC6ICwg0LLQtdGA0L3QuNGC0LUg0LrQu9Cw0YHRgSDQv9C+0LbQsNC70YPQudGB0YLQsCcpO1xyXG4gIH1cclxufTtcclxuIiwiaW1wb3J0IHsgY2FydCB9IGZyb20gJy4vbW9kdWxlcy9jYXJ0JztcclxuaW1wb3J0IHsgZ2V0R29vZHMgfSBmcm9tICcuL21vZHVsZXMvZ2V0R29vZHMnO1xyXG5pbXBvcnQgeyBzZWFyY2ggfSBmcm9tICcuL21vZHVsZXMvc2VhcmNoJztcclxuXHJcbmNhcnQoKTtcclxuZ2V0R29vZHMoKTtcclxuc2VhcmNoKCk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///220\n")}},__webpack_exports__={};__webpack_modules__[220]()})();